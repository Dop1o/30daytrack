<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>30-–î–Ω–µ–≤–Ω—ã–π –ß–µ–ª–ª–µ–Ω–¥–∂ –¢—Ä–µ–∫–µ—Ä ‚Äî –°–æ–∑–¥–∞–π –∏ –û—Ç—Å–ª–µ–∂–∏–≤–∞–π –°–≤–æ–∏ –ü—Ä–∏–≤—ã—á–∫–∏</title>
    
    <meta name="description" content="–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ 30-–¥–Ω–µ–≤–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø–æ–ª—É—á–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ü–µ–ª–µ–π.">
    <meta name="keywords" content="—Ç—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫, 30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂, —Å–∞–º–æ—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏–≤—ã—á–∫–∏, —Ü–µ–ª–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≥—Ä–µ—Å—Å">
    <meta name="author" content="30-–¥–Ω–µ–≤–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä">
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéØ</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {}
            }
        }
    </script>

    <style>
        :root {
            --animation-duration: 0.3s;
        }

        html {
            scroll-behavior: smooth;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        .break-words {
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate(-50%, 10px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .fade-in { 
            animation: fadeIn var(--animation-duration) ease-out; 
        }

        .animate-fadeIn {
            animation: fadeInUp var(--animation-duration) ease-out;
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        .day-cell {
            transition: all 0.2s ease;
        }

        .day-cell:hover {
            transform: translateY(-2px);
        }

        .tracker-list-item {
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }

        .tracker-list-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .tracker-list-item.active {
            border-left-color: #3b82f6;
            background-color: #f0f9ff;
        }

        .progress-bar {
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .empty-state {
            opacity: 0.6;
            transition: opacity 0.2s ease;
        }

        .empty-state:hover {
            opacity: 0.8;
        }

        .language-switcher {
            position: relative;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            min-width: 140px;
            z-index: 50;
            display: none;
            border: 1px solid #e5e7eb;
        }

        .language-dropdown.active {
            display: block;
        }

        .language-option {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 0.875rem;
            gap: 0.75rem;
        }

        .language-option:hover {
            background-color: #f9fafb;
        }

        .language-option.active {
            background-color: #eff6ff;
            color: #1d4ed8;
        }

        .language-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            background: white;
            border: 1px solid #e5e7eb;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            transition: all 0.2s;
            cursor: pointer;
        }

        .language-btn:hover {
            background-color: #f9fafb;
            border-color: #d1d5db;
        }

        .language-btn i {
            font-size: 0.75rem;
            color: #6b7280;
            transition: transform 0.2s;
        }

        .language-btn.active i {
            transform: rotate(180deg);
        }

        .mobile-lang-btn.active {
            background-color: #eff6ff;
            color: #1d4ed8;
            font-weight: 500;
            border: 1px solid #dbeafe;
        }

        .mobile-lang-btn {
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .calendar-grid {
            display: grid;
            gap: 0.75rem;
        }

        /* –î–ª—è PDF */
        .pdf-template {
            width: 794px !important;
            height: 1123px !important;
            padding: 40px !important;
            background: white !important;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            box-sizing: border-box !important;
        }

        .pdf-calendar-grid {
            display: grid !important;
            grid-template-columns: repeat(6, 1fr) !important;
            gap: 8px !important;
            margin: 20px 0 !important;
        }

        .pdf-day-cell {
            border: 2px solid !important;
            border-radius: 8px !important;
            padding: 8px !important;
            text-align: center !important;
            background: white !important;
            min-height: 60px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
        }

        .pdf-check-box {
            width: 30px !important;
            height: 30px !important;
            margin: 0 auto !important;
            border: 2px solid !important;
            border-radius: 8px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ */
        .color-label {
            transition: all 0.2s ease;
            border: 4px solid transparent;
        }

        input[name="color"]:checked + .color-label {
            border-color: #1f2937;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
            transform: scale(1.1);
        }

        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        .dark {
            color-scheme: dark;
        }

        .dark body {
            background-color: #111827;
            color: #f9fafb;
        }

        .dark nav {
            background-color: #1f2937;
            border-bottom: 1px solid #374151;
        }

        .dark nav a,
        .dark nav .language-btn {
            color: #d1d5db;
        }

        .dark nav a:hover,
        .dark nav .language-btn:hover {
            color: #ffffff;
            background-color: #374151;
        }

        .dark .bg-gradient-to-br.from-blue-50.to-cyan-50 {
            background: linear-gradient(to bottom right, #1e3a8a, #155e75);
        }

        .dark .bg-white {
            background-color: #1f2937;
        }

        .dark .bg-gray-50 {
            background-color: #111827;
        }

        .dark .bg-gray-100 {
            background-color: #374151;
        }

        .dark .bg-gray-200 {
            background-color: #4b5563;
        }

        .dark .border-gray-200,
        .dark .border-gray-300 {
            border-color: #4b5563;
        }

        .dark .text-gray-600,
        .dark .text-gray-700 {
            color: #d1d5db;
        }

        .dark .text-gray-500 {
            color: #9ca3af;
        }

        .dark .text-gray-900 {
            color: #f9fafb;
        }

        .dark .tracker-container {
            background-color: #1f2937;
        }

        .dark .day-cell {
            background-color: #374151;
            border-color: #4b5563;
        }

        .dark .tracker-list-item {
            background-color: #1f2937;
            border-left-color: #3b82f6;
        }

        .dark .tracker-list-item:hover {
            background-color: #374151;
        }

        .dark .stat-card {
            background-color: #1f2937;
        }

        .dark .goal-section {
            background-color: rgba(59, 130, 246, 0.1);
        }

        .dark input,
        .dark select,
        .dark textarea {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .dark input:focus,
        .dark select:focus,
        .dark textarea:focus {
            border-color: #3b82f6;
            background-color: #4b5563;
        }

        .dark [id$="-modal"] .bg-white {
            background-color: #1f2937;
        }

        .dark .modal-responsive {
            background-color: #1f2937;
        }

        .dark .border-gray-200 {
            border-color: #374151;
        }

        .dark .bg-gray-50 {
            background-color: #374151;
        }

        .dark .bg-blue-50,
        .dark .bg-green-50,
        .dark .bg-purple-50,
        .dark .bg-orange-50 {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .dark footer {
            background-color: #030712;
        }

        .dark .language-btn {
            background-color: #374151;
            border-color: #4b5563;
            color: #d1d5db;
        }

        .dark .language-btn:hover {
            background-color: #4b5563;
            border-color: #6b7280;
        }

        .dark .language-dropdown {
            background-color: #1f2937;
            border-color: #374151;
        }

        .dark .language-option:hover {
            background-color: #374151;
        }

        .dark #mobile-menu {
            background-color: #1f2937;
            border-color: #374151;
        }

        .dark #mobile-menu a:hover {
            background-color: #374151;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
        .dark input[name="color"]:checked + .color-label {
            border-color: #f9fafb;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
        #simple-notification {
            position: fixed;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1f2937;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 14px;
            text-align: center;
            max-width: calc(100% - 32px);
            width: auto;
            min-width: 200px;
            word-wrap: break-word;
            white-space: normal;
            line-height: 1.4;
        }

        .dark #simple-notification {
            background-color: #374151;
        }

        /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è —Ç–µ–º—ã */
        body,
        nav,
        .tracker-container,
        .stat-card,
        .tracker-list-item,
        input,
        select,
        textarea,
        .modal-responsive {
            transition: background-color 0.3s ease, 
                        border-color 0.3s ease, 
                        color 0.3s ease;
        }

        /* –î–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ */
        .fa-moon,
        .fa-sun,
        .progress-fill,
        .day-cell,
        .check-box {
            transition: all 0.3s ease;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        @media (max-width: 768px) {
            .language-switcher {
                position: static;
            }
            
            .language-dropdown {
                right: 0.5rem;
                left: 0.5rem;
                width: auto;
            }
            
            .language-btn {
                padding: 0.375rem 0.5rem;
                font-size: 0.8125rem;
            }
        }

        @media (max-width: 640px) {
            .modal-responsive {
                margin: 0.5rem !important;
                padding: 1rem !important;
                max-height: calc(100vh - 1rem);
                overflow-y: auto;
            }
            
            .modal-responsive .p-6 {
                padding: 1rem !important;
            }
            
            .modal-responsive .text-2xl {
                font-size: 1.25rem !important;
            }
            
            .calendar-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.5rem;
            }
            
            .day-cell {
                min-height: 5rem !important;
                padding: 0.5rem !important;
            }
            
            .check-box {
                width: 2.5rem !important;
                height: 2.5rem !important;
            }
        }

        @media (max-width: 480px) {
            .calendar-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.375rem;
            }
            
            .day-cell {
                min-height: 4.5rem !important;
                padding: 0.375rem !important;
            }
            
            .check-box {
                width: 2rem !important;
                height: 2rem !important;
            }
        }
        
        @media (min-width: 641px) and (max-width: 768px) {
            .calendar-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 0.75rem;
            }
        }
        
        @media (min-width: 769px) {
            .calendar-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50" data-lang="ru">
    
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bg-white shadow-sm py-4 sticky top-0 z-40 dark:bg-gray-800 dark:border-gray-700">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-xl sm:text-2xl font-bold text-gray-900 hover:text-blue-600 transition-colors flex items-center dark:text-white dark:hover:text-blue-400">
                    <i class="fas fa-chart-line text-blue-500 mr-2"></i>
                    <span data-translate="app_name">30-–¥–Ω–µ–≤–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä</span>
                </a>
                <div class="hidden md:flex gap-4 lg:gap-6 items-center">
                    <a href="#form-heading" class="text-gray-600 hover:text-blue-600 transition-colors text-sm lg:text-base px-3 py-2 rounded-lg hover:bg-gray-50 dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700" data-translate="nav_create_tracker">–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫–µ—Ä</a>
                    <a href="#my-trackers-heading" class="text-gray-600 hover:text-blue-600 transition-colors text-sm lg:text-base px-3 py-2 rounded-lg hover:bg-gray-50 dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700" data-translate="nav_my_trackers">–ú–æ–∏ —Ç—Ä–µ–∫–µ—Ä—ã</a>
                    <a href="#preview-heading" class="text-gray-600 hover:text-blue-600 transition-colors text-sm lg:text-base px-3 py-2 rounded-lg hover:bg-gray-50 dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700" data-translate="nav_preview">–ü—Ä–µ–≤—å—é</a>
                    
                    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ -->
                    <div class="language-switcher ml-2">
                        <button id="language-toggle" class="language-btn dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600">
                            <span id="current-lang-text">RU</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div id="language-dropdown" class="language-dropdown dark:bg-gray-800 dark:border-gray-700">
                            <div class="language-option active dark:text-gray-300 dark:hover:bg-gray-700" data-lang="ru" onclick="I18n.setLanguage('ru')">
                                <span>RU</span>
                            </div>
                            <div class="language-option dark:text-gray-300 dark:hover:bg-gray-700" data-lang="en" onclick="I18n.setLanguage('en')">
                                <span>US</span>
                            </div>
                        </div>
                    </div>

                    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
                    <button id="theme-toggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors" 
                        title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É" data-title-ru="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É" data-title-en="Toggle theme">
                        <i class="fas fa-moon text-gray-600 dark:text-gray-300"></i>
                        <i class="fas fa-sun text-gray-600 dark:text-yellow-400 hidden"></i>
                    </button>

                </div>
                <div class="flex items-center gap-2">
                    <button id="mobile-menu-btn" class="md:hidden text-gray-600 p-2 hover:bg-gray-100 rounded-lg transition-colors dark:text-gray-300 dark:hover:bg-gray-700">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mobile-menu" class="md:hidden mt-3 hidden bg-white rounded-lg shadow-md p-4 mx-4 dark:bg-gray-800 dark:border-gray-700">
            <div class="flex flex-col gap-1">
                <a href="#form-heading" class="text-gray-600 hover:text-blue-600 transition-colors py-3 px-4 rounded-lg hover:bg-gray-50 flex items-center dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700">
                    <i class="fas fa-plus-circle mr-3 text-blue-500"></i>
                    <span data-translate="nav_create_tracker">–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫–µ—Ä</span>
                </a>
                <a href="#my-trackers-heading" class="text-gray-600 hover:text-blue-600 transition-colors py-3 px-4 rounded-lg hover:bg-gray-50 flex items-center dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700">
                    <i class="fas fa-list mr-3 text-green-500"></i>
                    <span data-translate="nav_my_trackers">–ú–æ–∏ —Ç—Ä–µ–∫–µ—Ä—ã</span>
                </a>
                <a href="#preview-heading" class="text-gray-600 hover:text-blue-600 transition-colors py-3 px-4 rounded-lg hover:bg-gray-50 flex items-center dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700">
                    <i class="fas fa-eye mr-3 text-purple-500"></i>
                    <span data-translate="nav_preview">–ü—Ä–µ–≤—å—é</span>
                </a>
                
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é -->
                <div class="border-t border-gray-100 dark:border-gray-700 pt-3 mt-3">
                    <div class="flex items-center justify-between">
                        <span class="text-gray-600 font-medium dark:text-gray-300" data-translate="language">–Ø–∑—ã–∫</span>
                        <div class="flex gap-2">
                            <button onclick="I18n.setLanguage('ru')" 
                                    class="flex items-center gap-2 px-3 py-2 rounded-lg transition-colors mobile-lang-btn active dark:text-white"
                                    data-lang="ru">
                                <span>RU</span>
                            </button>
                            <button onclick="I18n.setLanguage('en')" 
                                    class="flex items-center gap-2 px-3 py-2 rounded-lg transition-colors mobile-lang-btn dark:text-gray-300"
                                    data-lang="en">
                                <span>US</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é -->
                <div class="border-t border-gray-100 dark:border-gray-700 pt-3 mt-3">
                    <div class="flex items-center justify-between">
                        <span class="text-gray-600 dark:text-gray-300 font-medium" data-translate="theme">–¢–µ–º–∞</span>
                        <button id="mobile-theme-toggle" 
                                class="flex items-center gap-2 px-3 py-2 rounded-lg transition-colors bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600">
                        <i class="fas fa-moon text-gray-600 dark:text-gray-300"></i>
                        <i class="fas fa-sun text-yellow-500 hidden"></i>
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </nav>

    <!-- –ì–µ—Ä–æ–π —Å–µ–∫—Ü–∏—è -->
    <header class="bg-gradient-to-br from-blue-50 to-cyan-50 py-12 md:py-20 lg:py-24 dark:from-blue-900/20 dark:to-cyan-900/20">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 md:mb-6 dark:text-white" data-translate="hero_title">
                –°–æ–∑–¥–∞–π —Å–≤–æ–π —á–µ–ª–ª–µ–Ω–¥–∂ –Ω–∞ 30 –¥–Ω–µ–π
            </h1>
            <p class="text-lg sm:text-xl md:text-2xl text-gray-600 max-w-2xl mx-auto px-2 dark:text-gray-300" data-translate="hero_subtitle">
                –°–æ–∑–¥–∞–≤–∞–π —Ç—Ä–µ–∫–µ—Ä—ã, —Å–æ—Ö—Ä–∞–Ω—è–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –¥–æ—Å—Ç–∏–≥–∞–π —Ü–µ–ª–µ–π
            </p>
        </div>
    </header>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <section class="py-8 md:py-12 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4">
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#form-heading" 
                   class="bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg text-base md:text-lg hover:from-blue-700 hover:to-cyan-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl text-center">
                    <i class="fas fa-plus-circle mr-2"></i>
                    <span data-translate="quick_action_create">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä</span>
                </a>
            </div>
        </div>
    </section>

    <!-- –ú–æ–∏ —Ç—Ä–µ–∫–µ—Ä—ã -->
    <section class="py-10 md:py-14 lg:py-16 bg-gray-50 dark:bg-gray-900" id="my-trackers-heading">
        <div class="container mx-auto px-4 max-w-6xl">
            <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 text-center mb-8 md:mb-12 dark:text-white" data-translate="my_trackers_title">
                –ú–æ–∏ —Ç—Ä–µ–∫–µ—Ä—ã
            </h2>
            
            <div id="trackers-list-container" class="mb-8">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                    <!-- –¢—Ä–µ–∫–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div id="empty-trackers-state" class="text-center py-12 empty-state">
                    <div class="w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center dark:bg-gray-800">
                        <i class="fas fa-chart-line text-gray-400 text-3xl dark:text-gray-500"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-600 mb-2 dark:text-gray-400" data-translate="empty_state_title">–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç —Ç—Ä–µ–∫–µ—Ä–æ–≤</h3>
                    <p class="text-gray-500 mb-6 dark:text-gray-500" data-translate="empty_state_description">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫–µ—Ä –∏ –Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
                    <a href="#form-heading" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-medium dark:text-blue-400 dark:hover:text-blue-300">
                        <i class="fas fa-plus-circle mr-2"></i>
                        <span data-translate="empty_state_action">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫–µ—Ä</span>
                    </a>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div id="statistics-container" class="hidden">
                <h3 class="text-lg md:text-xl font-semibold text-gray-900 mb-4 md:mb-6 dark:text-white" data-translate="statistics_title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
                    <div class="stat-card bg-white rounded-xl shadow-md p-4 md:p-6 dark:bg-gray-800">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4 dark:bg-blue-900/30">
                                <i class="fas fa-chart-bar text-blue-600 text-xl dark:text-blue-400"></i>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm dark:text-gray-400" data-translate="stat_total_trackers">–í—Å–µ–≥–æ —Ç—Ä–µ–∫–µ—Ä–æ–≤</p>
                                <p id="total-trackers" class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card bg-white rounded-xl shadow-md p-4 md:p-6 dark:bg-gray-800">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4 dark:bg-green-900/30">
                                <i class="fas fa-check-circle text-green-600 text-xl dark:text-green-400"></i>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm dark:text-gray-400" data-translate="stat_active_trackers">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–∫–µ—Ä—ã</p>
                                <p id="active-trackers" class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card bg-white rounded-xl shadow-md p-4 md:p-6 dark:bg-gray-800">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4 dark:bg-purple-900/30">
                                <i class="fas fa-chart-pie text-purple-600 text-xl dark:text-purple-400"></i>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm dark:text-gray-400" data-translate="stat_average_progress">–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
                                <p id="average-progress" class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">0%</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card bg-white rounded-xl shadow-md p-4 md:p-6 dark:bg-gray-800">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4 dark:bg-orange-900/30">
                                <i class="fas fa-trophy text-orange-600 text-xl dark:text-orange-400"></i>
                            </div>
                            <div>
                                <p class="text-gray-600 text-sm dark:text-gray-400" data-translate="stat_completed_days">–ó–∞–≤–µ—Ä—à–µ–Ω–æ –¥–Ω–µ–π</p>
                                <p id="completed-days" class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è -->
    <section class="py-10 md:py-14 lg:py-16 bg-white dark:bg-gray-800" id="form-heading">
        <div class="container mx-auto px-4 max-w-2xl">
            <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 text-center mb-8 md:mb-12 dark:text-white" data-translate="form_title">
                –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä
            </h2>
            
            <form id="tracker-form" class="space-y-6" novalidate>
                <div>
                    <label for="challenge-name" class="block text-sm md:text-base font-medium text-gray-700 mb-2 dark:text-gray-300" data-translate="form_name_label">
                        –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–≤–æ–µ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞ <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="challenge-name" name="challenge-name"
                           placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ß–∏—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å"
                           required maxlength="100"
                           data-placeholder-ru="–ù–∞–ø—Ä–∏–º–µ—Ä: –ß–∏—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å"
                           data-placeholder-en="Example: Read every day"
                           class="w-full px-4 py-3 md:py-3.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition text-sm md:text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400">
                    <span id="challenge-name-error" class="hidden text-red-500 text-xs md:text-sm mt-1"></span>
                </div>

                <div>
                    <label for="category" class="block text-sm md:text-base font-medium text-gray-700 mb-2 dark:text-gray-300" data-translate="form_category_label">
                        –ö–∞—Ç–µ–≥–æ—Ä–∏—è <span class="text-red-500">*</span>
                    </label>
                    <select id="category" name="category" required
                            class="w-full px-4 py-3 md:py-3.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition text-sm md:text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="" data-translate="form_category_placeholder">–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        <option value="health" data-translate="category_health">–ó–¥–æ—Ä–æ–≤—å–µ & –°–ø–æ—Ä—Ç</option>
                        <option value="learning" data-translate="category_learning">–û–±—É—á–µ–Ω–∏–µ & –†–æ—Å—Ç</option>
                        <option value="productivity" data-translate="category_productivity">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
                        <option value="mindfulness" data-translate="category_mindfulness">–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å & –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</option>
                        <option value="other" data-translate="category_other">–î—Ä—É–≥–æ–µ</option>
                    </select>
                    <span id="category-error" class="hidden text-red-500 text-xs md:text-sm mt-1"></span>
                </div>

                <div>
                    <label for="goal" class="block text-sm md:text-base font-medium text-gray-700 mb-2 dark:text-gray-300" data-translate="form_goal_label">
                        –ú–æ—è —Ü–µ–ª—å –Ω–∞ 30 –¥–Ω–µ–π <span class="text-red-500">*</span>
                    </label>
                    <textarea id="goal" name="goal" rows="4"
                              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ—á–∏—Ç–∞—Ç—å 300 —Å—Ç—Ä–∞–Ω–∏—Ü, –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º 30 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å"
                              required maxlength="500"
                              data-placeholder-ru="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ—á–∏—Ç–∞—Ç—å 300 —Å—Ç—Ä–∞–Ω–∏—Ü, –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º 30 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å"
                              data-placeholder-en="Example: Read 300 pages, exercise 30 minutes daily"
                              class="w-full px-4 py-3 md:py-3.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition resize-none text-sm md:text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"></textarea>
                    <span id="goal-error" class="hidden text-red-500 text-xs md:text-sm mt-1"></span>
                </div>

                <div>
                    <label class="block text-sm md:text-base font-medium text-gray-700 mb-3 dark:text-gray-300" data-translate="form_color_label">
                        –¶–≤–µ—Ç —Ç—Ä–µ–∫–µ—Ä–∞
                    </label>
                    <div class="flex flex-wrap gap-3 md:gap-4 justify-center">
                        <input type="radio" id="color-blue" name="color" value="blue" class="hidden" checked>
                        <label for="color-blue" class="color-label w-10 h-10 md:w-12 md:h-12 bg-blue-500 rounded-full cursor-pointer hover:scale-110 transition-all" tabindex="0" title="–°–∏–Ω–∏–π" data-title-ru="–°–∏–Ω–∏–π" data-title-en="Blue"></label>

                        <input type="radio" id="color-green" name="color" value="green" class="hidden">
                        <label for="color-green" class="color-label w-10 h-10 md:w-12 md:h-12 bg-green-500 rounded-full cursor-pointer hover:scale-110 transition-all" tabindex="0" title="–ó–µ–ª–µ–Ω—ã–π" data-title-ru="–ó–µ–ª–µ–Ω—ã–π" data-title-en="Green"></label>

                        <input type="radio" id="color-purple" name="color" value="purple" class="hidden">
                        <label for="color-purple" class="color-label w-10 h-10 md:w-12 md:h-12 bg-purple-500 rounded-full cursor-pointer hover:scale-110 transition-all" tabindex="0" title="–§–∏–æ–ª–µ—Ç–æ–≤—ã–π" data-title-ru="–§–∏–æ–ª–µ—Ç–æ–≤—ã–π" data-title-en="Purple"></label>

                        <input type="radio" id="color-orange" name="color" value="orange" class="hidden">
                        <label for="color-orange" class="color-label w-10 h-10 md:w-12 md:h-12 bg-orange-500 rounded-full cursor-pointer hover:scale-110 transition-all" tabindex="0" title="–û—Ä–∞–Ω–∂–µ–≤—ã–π" data-title-ru="–û—Ä–∞–Ω–∂–µ–≤—ã–π" data-title-en="Orange"></label>

                        <input type="radio" id="color-pink" name="color" value="pink" class="hidden">
                        <label for="color-pink" class="color-label w-10 h-10 md:w-12 md:h-12 bg-pink-500 rounded-full cursor-pointer hover:scale-110 transition-all" tabindex="0" title="–†–æ–∑–æ–≤—ã–π" data-title-ru="–†–æ–∑–æ–≤—ã–π" data-title-en="Pink"></label>
                    </div>
                </div>

                <button type="submit" id="submit-btn"
                        class="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 md:py-4 px-6 rounded-lg text-base md:text-lg hover:from-blue-700 hover:to-cyan-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed">
                    <span class="btn-text">
                        <i class="fas fa-plus-circle mr-2"></i>
                        <span data-translate="form_submit">–°–æ–∑–¥–∞—Ç—å –º–æ–π —Ç—Ä–µ–∫–µ—Ä!</span>
                    </span>
                    <span class="btn-loading hidden">
                        <i class="fas fa-spinner fa-spin mr-2"></i>
                        <span data-translate="form_loading">–°–æ–∑–¥–∞–Ω–∏–µ...</span>
                    </span>
                </button>
            </form>
        </div>
    </section>

    <!-- –ü—Ä–µ–≤—å—é -->
    <section class="py-10 md:py-14 lg:py-16 bg-gray-50 dark:bg-gray-900" id="preview-heading">
        <div class="container mx-auto px-4 max-w-4xl">
            <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 mb-6 text-center dark:text-white" data-translate="preview_title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–µ–∫–µ—Ä–∞</h2>
            <div id="pdf-preview" class="bg-white rounded-xl shadow-lg p-4 sm:p-6 md:p-8 lg:p-12 min-h-[400px] flex items-center justify-center dark:bg-gray-800">
                <p class="text-gray-400 text-lg sm:text-xl text-center px-4 dark:text-gray-500">
                    <i class="fas fa-magic text-gray-300 text-2xl mb-2 block dark:text-gray-600"></i>
                    <span data-translate="preview_empty">–¢–≤–æ–π —Ç—Ä–µ–∫–µ—Ä –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è</span>
                </p>
            </div>
            <div id="preview-actions" class="mt-6 flex flex-col sm:flex-row gap-4 justify-center hidden">
                <button id="download-pdf-btn"
                        class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 md:px-8 rounded-lg text-base md:text-lg shadow-lg hover:shadow-xl transition-all duration-200">
                    <i class="fas fa-download mr-2"></i>
                    <span data-translate="preview_download_pdf">–°–∫–∞—á–∞—Ç—å PDF</span>
                </button>
                <button id="copy-tracker-link-btn"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 md:px-8 rounded-lg text-base md:text-lg shadow-lg hover:shadow-xl transition-all duration-200">
                    <i class="fas fa-link mr-2"></i>
                    <span data-translate="preview_copy_link">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</span>
                </button>
                <button id="save-changes-btn"
                        class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 md:px-8 rounded-lg text-base md:text-lg shadow-lg hover:shadow-xl transition-all duration-200">
                    <i class="fas fa-save mr-2"></i>
                    <span data-translate="preview_save_changes">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</span>
                </button>
            </div>
        </div>
    </section>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="bg-gray-900 text-gray-300 py-10 md:py-12 dark:bg-gray-950">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-6 md:mb-8">
                    <h3 class="text-xl md:text-2xl font-bold text-white mb-3 md:mb-4" data-translate="footer_title">30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ —Ç—Ä–µ–∫–µ—Ä</h3>
                    <p class="text-gray-400 text-sm md:text-base dark:text-gray-500" data-translate="footer_description">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–µ–π</p>
                </div>
                
                <nav class="flex flex-col sm:flex-row flex-wrap justify-center items-center gap-4 md:gap-6 mb-6 md:mb-8">
                    <button onclick="openModal('about-modal')" class="hover:text-white transition-colors text-sm md:text-base px-3 py-2 dark:hover:text-gray-200" data-translate="footer_about">–û –ø—Ä–æ–µ–∫—Ç–µ</button>
                    <span class="hidden sm:inline text-gray-500">‚Ä¢</span>
                    <button onclick="openModal('privacy-modal')" class="hover:text-white transition-colors text-sm md:text-base px-3 py-2 dark:hover:text-gray-200" data-translate="footer_privacy">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</button>
                    <span class="hidden sm:inline text-gray-500">‚Ä¢</span>
                    <button onclick="openModal('contact-modal')" class="hover:text-white transition-colors text-sm md:text-base px-3 py-2 dark:hover:text-gray-200" data-translate="footer_contact">–°–≤—è–∑–∞—Ç—å—Å—è</button>
                    <span class="hidden sm:inline text-gray-500">‚Ä¢</span>
                    <button onclick="openModal('support-modal')" class="hover:text-white transition-colors text-sm md:text-base px-3 py-2 dark:hover:text-gray-200" data-translate="footer_support">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
                </nav>
                
                <div class="text-center">
                    <p class="text-xs md:text-sm text-gray-500 mb-2 dark:text-gray-600" data-translate="footer_copyright">
                        ¬© 2025 30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ —Ç—Ä–µ–∫–µ—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
                    </p>
                    <p class="text-xs text-gray-600 dark:text-gray-700" data-translate="footer_disclaimer">
                        –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <!-- –ú–æ–¥–∞–ª–∫–∞ –æ –ø—Ä–æ–µ–∫—Ç–µ -->
    <div id="about-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="min-h-screen flex items-center justify-center p-3 sm:p-4">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-2xl w-full modal-responsive dark:bg-gray-800">
                <div class="flex justify-between items-center border-b border-gray-200 p-4 sm:p-6 dark:border-gray-700">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white" data-translate="modal_about_title">–û –ø—Ä–æ–µ–∫—Ç–µ</h2>
                    <button onclick="closeModal('about-modal')" class="text-gray-400 hover:text-gray-600 text-xl sm:text-2xl dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4 sm:p-6 md:p-8">
                    <div class="mb-6 md:mb-8">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6 dark:from-blue-900/30 dark:to-cyan-900/30">
                            <i class="fas fa-rocket text-blue-600 text-2xl md:text-3xl dark:text-blue-400"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-gray-900 text-center mb-3 md:mb-4 dark:text-white" data-translate="modal_about_app_name">30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ —Ç—Ä–µ–∫–µ—Ä</h3>
                        <p class="text-gray-600 text-center text-sm md:text-base mb-4 md:mb-6 dark:text-gray-400" data-translate="modal_about_description">
                            –ü—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫
                        </p>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6">
                        <div class="bg-blue-50 p-3 md:p-4 rounded-lg dark:bg-blue-900/20">
                            <h4 class="font-semibold text-gray-900 mb-2 flex items-center text-sm md:text-base dark:text-white">
                                <i class="fas fa-bullseye text-blue-600 mr-2 dark:text-blue-400"></i>
                                <span data-translate="modal_about_focus">–§–æ–∫—É—Å –Ω–∞ —Ü–µ–ª–∏</span>
                            </h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_about_focus_desc">–ü–æ–º–æ–≥–∞–µ—Ç —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–π –≤–∞–∂–Ω–æ–π —Ü–µ–ª–∏ –Ω–∞ 30 –¥–Ω–µ–π</p>
                        </div>
                        <div class="bg-green-50 p-3 md:p-4 rounded-lg dark:bg-green-900/20">
                            <h4 class="font-semibold text-gray-900 mb-2 flex items-center text-sm md:text-base dark:text-white">
                                <i class="fas fa-chart-line text-green-600 mr-2 dark:text-green-400"></i>
                                <span data-translate="modal_about_visual">–í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å</span>
                            </h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_about_visual_desc">–ö—Ä–∞—Å–∏–≤—ã–π —Ç—Ä–µ–∫–µ—Ä –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å</p>
                        </div>
                        <div class="bg-purple-50 p-3 md:p-4 rounded-lg dark:bg-purple-900/20">
                            <h4 class="font-semibold text-gray-900 mb-2 flex items-center text-sm md:text-base dark:text-white">
                                <i class="fas fa-heart text-purple-600 mr-2 dark:text-purple-400"></i>
                                <span data-translate="modal_about_science">–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –Ω–∞—É–∫–µ</span>
                            </h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_about_science_desc">21-30 –¥–Ω–µ–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –ø—Ä–∏–≤—ã—á–∫–∏</p>
                        </div>
                        <div class="bg-orange-50 p-3 md:p-4 rounded-lg dark:bg-orange-900/20">
                            <h4 class="font-semibold text-gray-900 mb-2 flex items-center text-sm md:text-base dark:text-white">
                                <i class="fas fa-lock text-orange-600 mr-2 dark:text-orange-400"></i>
                                <span data-translate="modal_about_privacy">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</span>
                            </h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_about_privacy_desc">–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-b-xl sm:rounded-b-2xl p-4 sm:p-6 dark:bg-gray-700">
                    <button onclick="closeModal('about-modal')" 
                            class="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg text-sm md:text-base hover:from-blue-700 hover:to-cyan-700 transition-all"
                            data-translate="modal_ok">
                        –ü–æ–Ω—è—Ç–Ω–æ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ -->
    <div id="privacy-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="min-h-screen flex items-center justify-center p-3 sm:p-4">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col modal-responsive dark:bg-gray-800">
                <div class="flex justify-between items-center border-b border-gray-200 p-4 sm:p-6 dark:border-gray-700">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white" data-translate="modal_privacy_title">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h2>
                    <button onclick="closeModal('privacy-modal')" class="text-gray-400 hover:text-gray-600 text-xl sm:text-2xl dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4 sm:p-6 md:p-8 overflow-y-auto flex-grow">
                    <div class="space-y-4 md:space-y-6">
                        <div class="bg-gray-50 p-3 md:p-4 rounded-lg dark:bg-gray-700">
                            <h4 class="font-semibold text-gray-900 mb-2 text-sm md:text-base dark:text-white" data-translate="modal_privacy_storage_title">üìÅ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_privacy_storage_desc">–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ù–∏–∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã.</p>
                        </div>

                        <div class="bg-gray-50 p-3 md:p-4 rounded-lg dark:bg-gray-700">
                            <h4 class="font-semibold text-gray-900 mb-2 text-sm md:text-base dark:text-white" data-translate="modal_privacy_confidential_title">üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_privacy_confidential_desc">–ú—ã –Ω–µ —Å–æ–±–∏—Ä–∞–µ–º –∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.</p>
                        </div>

                        <div class="bg-gray-50 p-3 md:p-4 rounded-lg dark:bg-gray-700">
                            <h4 class="font-semibold text-gray-900 mb-2 text-sm md:text-base dark:text-white" data-translate="modal_privacy_pdf_title">üìÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF</h4>
                            <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="modal_privacy_pdf_desc">PDF —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-b-xl sm:rounded-b-2xl p-4 sm:p-6 dark:bg-gray-700">
                    <button onclick="closeModal('privacy-modal')" 
                            class="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg text-sm md:text-base hover:from-blue-700 hover:to-cyan-700 transition-all"
                            data-translate="modal_accept">
                        –ü—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->
    <div id="contact-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="min-h-screen flex items-center justify-center p-3 sm:p-4">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full modal-responsive dark:bg-gray-800">
                <div class="flex justify-between items-center border-b border-gray-200 p-4 sm:p-6 dark:border-gray-700">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white" data-translate="modal_contact_title">–°–≤—è–∑–∞—Ç—å—Å—è</h2>
                    <button onclick="closeModal('contact-modal')" class="text-gray-400 hover:text-gray-600 text-xl sm:text-2xl dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4 sm:p-6 md:p-8">
                    <div class="text-center mb-6 md:mb-8">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6 dark:from-blue-900/30 dark:to-cyan-900/30">
                            <i class="fas fa-envelope text-blue-600 text-2xl md:text-3xl dark:text-blue-400"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-2 dark:text-white" data-translate="modal_contact_question">–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã?</h3>
                        <p class="text-gray-600 text-sm md:text-base dark:text-gray-400" data-translate="modal_contact_description">–°–≤—è–∂–∏—Ç–µ—Å—å —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º</p>
                    </div>

                    <div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg sm:rounded-xl border border-blue-100 p-4 md:p-6 dark:from-blue-900/20 dark:to-cyan-900/20 dark:border-blue-800/30">
                        <h4 class="font-semibold text-gray-900 mb-2 md:mb-4 text-base md:text-lg dark:text-white">
                            <i class="fas fa-user-circle text-blue-600 mr-2 dark:text-blue-400"></i>
                            <span data-translate="modal_contact_developer">–ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</span>
                        </h4>
                        
                        <div class="space-y-3 md:space-y-4">
                            <div class="flex items-center">
                                <div class="w-8 text-center">
                                    <i class="fas fa-user text-blue-500 dark:text-blue-400"></i>
                                </div>
                                <div class="ml-3 md:ml-4">
                                    <p class="text-gray-700 font-medium text-sm md:text-base dark:text-gray-300" data-translate="developer_name">–ò—Å–º–∞–∏–ª</p>
                                    <p class="text-gray-600 text-xs md:text-sm dark:text-gray-400" data-translate="developer_role">Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</p>
                                </div>
                            </div>
                            
                            <a href="mailto:ismailgejbatov@gmail.com" class="block no-underline">
                                <div class="flex items-center p-3 bg-white rounded-lg hover:bg-blue-50 transition-colors group dark:bg-gray-700 dark:hover:bg-gray-600">
                                    <div class="w-8 text-center">
                                        <i class="fas fa-envelope text-blue-500 dark:text-blue-400"></i>
                                    </div>
                                    <div class="ml-3 md:ml-4 flex-grow">
                                        <p class="text-gray-700 font-medium text-sm md:text-base dark:text-gray-300">Email</p>
                                        <p class="text-blue-600 group-hover:text-blue-800 text-xs md:text-sm break-all dark:text-blue-400 dark:group-hover:text-blue-300">
                                            ismailgejbatov@gmail.com
                                        </p>
                                    </div>
                                </div>
                            </a>
                            
                            <a href="https://t.me/prosto_isko" target="_blank" class="block no-underline">
                                <div class="flex items-center p-3 bg-white rounded-lg hover:bg-blue-50 transition-colors group dark:bg-gray-700 dark:hover:bg-gray-600">
                                    <div class="w-8 text-center">
                                        <i class="fab fa-telegram text-blue-500 dark:text-blue-400"></i>
                                    </div>
                                    <div class="ml-3 md:ml-4 flex-grow">
                                        <p class="text-gray-700 font-medium text-sm md:text-base dark:text-gray-300">Telegram</p>
                                        <p class="text-blue-600 group-hover:text-blue-800 text-xs md:text-sm dark:text-blue-400 dark:group-hover:text-blue-300">
                                            @prosto_isko
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-b-xl sm:rounded-b-2xl p-4 sm:p-6 dark:bg-gray-700">
                    <button onclick="closeModal('contact-modal')" 
                            class="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg text-sm md:text-base hover:from-blue-700 hover:to-cyan-700 transition-all"
                            data-translate="modal_close">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ -->
    <div id="support-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="min-h-screen flex items-center justify-center p-3 sm:p-4">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full modal-responsive dark:bg-gray-800">
                <div class="flex justify-between items-center border-b border-gray-200 p-4 sm:p-6 dark:border-gray-700">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white" data-translate="modal_support_title">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h2>
                    <button onclick="closeModal('support-modal')" class="text-gray-400 hover:text-gray-600 text-xl sm:text-2xl dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4 sm:p-6 md:p-8">
                    <div class="text-center mb-6 md:mb-8">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6 dark:from-green-900/30 dark:to-emerald-900/30">
                            <i class="fas fa-heart text-green-600 text-2xl md:text-3xl dark:text-green-400"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-2 dark:text-white" data-translate="modal_support_subtitle">–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</h3>
                        <p class="text-gray-600 text-sm md:text-base dark:text-gray-400" data-translate="modal_support_description">–í–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —É–ª—É—á—à–∞—Ç—å —Ç—Ä–µ–∫–µ—Ä –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</p>
                    </div>

                    
                    <div class="space-y-4 md:space-y-6">
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg sm:rounded-xl border border-green-100 p-4 md:p-6 dark:from-green-900/20 dark:to-emerald-900/20 dark:border-green-800/30">
                            <h4 class="font-semibold text-green-900 mb-3 md:mb-4 text-base md:text-lg dark:text-white">
                                <i class="fas fa-donate text-green-600 mr-2 dark:text-green-400"></i>
                                <span data-translate="modal_support_methods">–°–ø–æ—Å–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏</span>
                            </h4>
                            
                            <div class="space-y-3 md:space-y-4">
                                <!-- –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ -->
                                <div class="bg-white rounded-lg p-3 hover:bg-green-50 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600">
                                    <div class="flex items-center mb-2">
                                        <div class="w-8 text-center">
                                            <i class="fas fa-credit-card text-green-500 dark:text-green-400"></i>
                                        </div>
                                        <div class="ml-3 md:ml-4 flex-grow">
                                            <p class="text-gray-700 font-medium text-sm md:text-base dark:text-gray-300" data-translate="support_bank_card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <p class="text-green-600 font-mono text-sm md:text-base select-all flex-grow bg-green-50 px-3 py-2 rounded truncate dark:bg-green-900/30 dark:text-green-400" id="card-number">
                                            2202 2055 7513 3944
                                        </p>
                                        <button onclick="copyCardNumber()" 
                                                class="flex-shrink-0 w-10 h-10 bg-green-100 text-green-600 hover:bg-green-200 rounded-lg flex items-center justify-center transition-colors dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50"
                                                title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã"
                                                data-title-ru="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã"
                                                data-title-en="Copy card number">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- TON –∫–æ—à–µ–ª–µ–∫ -->
                                <div class="bg-white rounded-lg p-3 hover:bg-green-50 transition-colors dark:bg-gray-700 dark:hover:bg-gray-600">
                                    <div class="flex items-center mb-2">
                                        <div class="w-8 text-center">
                                            <i class="fas fa-coins text-blue-500 dark:text-blue-400"></i>
                                        </div>
                                        <div class="ml-3 md:ml-4 flex-grow">
                                            <p class="text-gray-700 font-medium text-sm md:text-base dark:text-gray-300" data-translate="support_ton_wallet">TON –∫–æ—à–µ–ª–µ–∫</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <p class="text-gray-600 text-xs font-mono select-all flex-grow bg-gray-50 px-3 py-2 rounded break-all dark:bg-gray-600 dark:text-gray-300" id="ton-wallet">
                                            UQB650sDu-0vZiBrzHvoVRmxmvTNEweRQ02qijkKKmDk3wC2
                                        </p>
                                        <button onclick="copyTonWallet()" 
                                                class="flex-shrink-0 w-10 h-10 bg-blue-100 text-blue-600 hover:bg-blue-200 rounded-lg flex items-center justify-center transition-colors dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-900/50"
                                                title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å TON –∞–¥—Ä–µ—Å"
                                                data-title-ru="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å TON –∞–¥—Ä–µ—Å"
                                                data-title-en="Copy TON address">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center text-xs md:text-sm text-gray-500 dark:text-gray-400">
                            <p><i class="fas fa-info-circle text-blue-500 mr-1 dark:text-blue-400"></i>
                                <span data-translate="support_note">–õ—é–±–∞—è —Å—É–º–º–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏—é –ø—Ä–æ–µ–∫—Ç–∞</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-b-xl sm:rounded-b-2xl p-4 sm:p-6 dark:bg-gray-700">
                    <button onclick="closeModal('support-modal')" 
                            class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white font-semibold py-3 px-6 rounded-lg text-sm md:text-base hover:from-green-700 hover:to-emerald-700 transition-all"
                            data-translate="modal_close">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="delete-tracker-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="min-h-screen flex items-center justify-center p-3 sm:p-4">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full modal-responsive dark:bg-gray-800">
                <div class="flex justify-between items-center border-b border-gray-200 p-4 sm:p-6 dark:border-gray-700">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white" data-translate="modal_delete_title">–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫–µ—Ä</h2>
                    <button onclick="closeModal('delete-tracker-modal')" class="text-gray-400 hover:text-gray-600 text-xl sm:text-2xl dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4 sm:p-6 md:p-8">
                    <div class="text-center mb-6">
                        <div class="w-20 h-20 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center dark:bg-red-900/30">
                            <i class="fas fa-trash-alt text-red-600 text-3xl dark:text-red-400"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2 dark:text-white" data-translate="modal_delete_confirm">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</h3>
                        <p class="text-gray-600 break-words overflow-hidden dark:text-gray-400" id="delete-tracker-message" data-translate="modal_delete_description">
                            –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–µ—Ä–∞ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.
                        </p>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-b-xl sm:rounded-b-2xl p-4 sm:p-6 flex gap-4 dark:bg-gray-700">
                    <button onclick="closeModal('delete-tracker-modal')" 
                            class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg text-sm md:text-base transition-all dark:bg-gray-600 dark:text-gray-300 dark:hover:bg-gray-500"
                            data-translate="modal_cancel">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button id="confirm-delete-btn"
                            class="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg text-sm md:text-base transition-all"
                            data-translate="modal_delete">
                        –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç—Ä–µ–∫–µ—Ä -->
    <div id="share-tracker-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="min-h-screen flex items-center justify-center p-3 sm:p-4">
            <div class="bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full modal-responsive dark:bg-gray-800">
                <div class="flex justify-between items-center border-b border-gray-200 p-4 sm:p-6 dark:border-gray-700">
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-900 dark:text-white" data-translate="modal_share_title">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç—Ä–µ–∫–µ—Ä–æ–º</h2>
                    <button onclick="closeModal('share-tracker-modal')" class="text-gray-400 hover:text-gray-600 text-xl sm:text-2xl dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="p-4 sm:p-6 md:p-8">
                    <div class="text-center mb-6">
                        <div class="w-20 h-20 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center dark:bg-blue-900/30">
                            <i class="fas fa-link text-blue-600 text-3xl dark:text-blue-400"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2 dark:text-white" data-translate="modal_share_subtitle">–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç—Ä–µ–∫–µ—Ä</h3>
                        <p class="text-gray-600 mb-4 dark:text-gray-400" data-translate="modal_share_description">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–º—É —Ç—Ä–µ–∫–µ—Ä—É:</p>
                        
                        <div class="bg-gray-50 p-4 rounded-lg mb-4 dark:bg-gray-700">
                            <p id="tracker-share-url" class="text-blue-600 font-mono text-sm break-all dark:text-blue-400"></p>
                        </div>
                        
                        <div class="flex items-center justify-center gap-2">
                            <button onclick="copyShareUrl()" 
                                    class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-all flex items-center">
                                <i class="fas fa-copy mr-2"></i>
                                <span data-translate="modal_share_copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
                            </button>
                            <a id="open-tracker-link" href="#" target="_blank"
                               class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-all flex items-center no-underline">
                                <i class="fas fa-external-link-alt mr-2"></i>
                                <span data-translate="modal_share_open">–û—Ç–∫—Ä—ã—Ç—å</span>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 rounded-b-xl sm:rounded-b-2xl p-4 sm:p-6 dark:bg-gray-700">
                    <button onclick="closeModal('share-tracker-modal')" 
                            class="w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold py-3 px-6 rounded-lg text-sm md:text-base hover:from-blue-700 hover:to-cyan-700 transition-all"
                            data-translate="modal_close">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="simple-notification" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 opacity-0 transition-opacity duration-300 text-sm hidden dark:bg-gray-700">
        <span id="notification-text"></span>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π JavaScript -->
    <script>
        const CONFIG = {
            colorMap: {
                blue: { hex: '#3b82f6', name: '–°–∏–Ω–∏–π', name_en: 'Blue' },
                green: { hex: '#10b981', name: '–ó–µ–ª–µ–Ω—ã–π', name_en: 'Green' },
                purple: { hex: '#8b5cf6', name: '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π', name_en: 'Purple' },
                orange: { hex: '#f97316', name: '–û—Ä–∞–Ω–∂–µ–≤—ã–π', name_en: 'Orange' },
                pink: { hex: '#ec4899', name: '–†–æ–∑–æ–≤—ã–π', name_en: 'Pink' }
            },
            storageKey: '30day_trackers_v2',
            maxTrackers: 50
        };

        const ThemeManager = {
            currentTheme: 'light',
            
            init() {
                const savedTheme = localStorage.getItem('tracker_theme');
                const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                
                this.currentTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
                this.applyTheme(this.currentTheme);
                this.initThemeToggle();
            },
            
            applyTheme(theme) {
                this.currentTheme = theme;
                
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                
                localStorage.setItem('tracker_theme', theme);
                this.updateThemeIcons(theme);
            },
            
            toggleTheme() {
                const newTheme = this.currentTheme === 'dark' ? 'light' : 'dark';
                this.applyTheme(newTheme);
                
                if (newTheme === 'dark') {
                    Utils.showNotification(I18n.t('notification_dark_theme'));
                } else {
                    Utils.showNotification(I18n.t('notification_light_theme'));
                }
            },
            
            initThemeToggle() {
                const desktopToggle = document.getElementById('theme-toggle');
                if (desktopToggle) {
                    desktopToggle.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleTheme();
                    });
                }
                
                const mobileToggle = document.getElementById('mobile-theme-toggle');
                if (mobileToggle) {
                    mobileToggle.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleTheme();
                    });
                }
                
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                    if (!localStorage.getItem('tracker_theme')) {
                        this.applyTheme(e.matches ? 'dark' : 'light');
                    }
                });
            },
            
            updateThemeIcons(theme) {
                const moonIcons = document.querySelectorAll('.fa-moon');
                const sunIcons = document.querySelectorAll('.fa-sun');
                
                if (theme === 'dark') {
                    moonIcons.forEach(icon => icon.classList.add('hidden'));
                    sunIcons.forEach(icon => icon.classList.remove('hidden'));
                } else {
                    moonIcons.forEach(icon => icon.classList.remove('hidden'));
                    sunIcons.forEach(icon => icon.classList.add('hidden'));
                }
            },
            
            updateThemeText() {
                const themeTexts = document.querySelectorAll('[data-translate="theme"]');
                themeTexts.forEach(el => {
                    if (I18n && I18n.t) {
                        el.textContent = I18n.t('theme');
                    }
                });
            }
        };

        const I18n = {
            currentLang: 'ru',
            translations: {
                ru: {
                    app_name: "30-–¥–Ω–µ–≤–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä",
                    language: "–Ø–∑—ã–∫",
                    nav_create_tracker: "–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫–µ—Ä",
                    nav_my_trackers: "–ú–æ–∏ —Ç—Ä–µ–∫–µ—Ä—ã",
                    nav_preview: "–ü—Ä–µ–≤—å—é",
                    hero_title: "–°–æ–∑–¥–∞–π —Å–≤–æ–π —á–µ–ª–ª–µ–Ω–¥–∂ –Ω–∞ 30 –¥–Ω–µ–π",
                    hero_subtitle: "–°–æ–∑–¥–∞–≤–∞–π —Ç—Ä–µ–∫–µ—Ä—ã, —Å–æ—Ö—Ä–∞–Ω—è–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –¥–æ—Å—Ç–∏–≥–∞–π —Ü–µ–ª–µ–π",
                    quick_action_create: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä",
                    my_trackers_title: "–ú–æ–∏ —Ç—Ä–µ–∫–µ—Ä—ã",
                    empty_state_title: "–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç —Ç—Ä–µ–∫–µ—Ä–æ–≤",
                    empty_state_description: "–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫–µ—Ä –∏ –Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å",
                    empty_state_action: "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫–µ—Ä",
                    statistics_title: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
                    stat_total_trackers: "–í—Å–µ–≥–æ —Ç—Ä–µ–∫–µ—Ä–æ–≤",
                    stat_active_trackers: "–ê–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–∫–µ—Ä—ã",
                    stat_average_progress: "–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å",
                    stat_completed_days: "–ó–∞–≤–µ—Ä—à–µ–Ω–æ –¥–Ω–µ–π",
                    form_title: "–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä",
                    form_name_label: "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–≤–æ–µ–≥–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞",
                    form_category_label: "–ö–∞—Ç–µ–≥–æ—Ä–∏—è",
                    form_category_placeholder: "–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é",
                    form_goal_label: "–ú–æ—è —Ü–µ–ª—å –Ω–∞ 30 –¥–Ω–µ–π",
                    form_color_label: "–¶–≤–µ—Ç —Ç—Ä–µ–∫–µ—Ä–∞",
                    form_submit: "–°–æ–∑–¥–∞—Ç—å –º–æ–π —Ç—Ä–µ–∫–µ—Ä!",
                    form_loading: "–°–æ–∑–¥–∞–Ω–∏–µ...",
                    category_health: "–ó–¥–æ—Ä–æ–≤—å–µ & –°–ø–æ—Ä—Ç",
                    category_learning: "–û–±—É—á–µ–Ω–∏–µ & –†–æ—Å—Ç",
                    category_productivity: "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
                    category_mindfulness: "–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å & –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è",
                    category_other: "–î—Ä—É–≥–æ–µ",
                    preview_title: "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–µ–∫–µ—Ä–∞",
                    preview_empty: "–¢–≤–æ–π —Ç—Ä–µ–∫–µ—Ä –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è",
                    preview_download_pdf: "–°–∫–∞—á–∞—Ç—å PDF",
                    preview_copy_link: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É",
                    preview_save_changes: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è",
                    footer_title: "30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ —Ç—Ä–µ–∫–µ—Ä",
                    footer_description: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–µ–π",
                    footer_about: "–û –ø—Ä–æ–µ–∫—Ç–µ",
                    footer_privacy: "–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
                    footer_contact: "–°–≤—è–∑–∞—Ç—å—Å—è",
                    footer_support: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
                    footer_copyright: "¬© 2025 30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ —Ç—Ä–µ–∫–µ—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.",
                    footer_disclaimer: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.",
                    modal_ok: "–ü–æ–Ω—è—Ç–Ω–æ",
                    modal_accept: "–ü—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è",
                    modal_close: "–ó–∞–∫—Ä—ã—Ç—å",
                    modal_cancel: "–û—Ç–º–µ–Ω–∞",
                    modal_delete: "–£–¥–∞–ª–∏—Ç—å",
                    modal_about_title: "–û –ø—Ä–æ–µ–∫—Ç–µ",
                    modal_about_app_name: "30-–¥–Ω–µ–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂ —Ç—Ä–µ–∫–µ—Ä",
                    modal_about_description: "–ü—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–∑–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫",
                    modal_about_focus: "–§–æ–∫—É—Å –Ω–∞ —Ü–µ–ª–∏",
                    modal_about_focus_desc: "–ü–æ–º–æ–≥–∞–µ—Ç —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–π –≤–∞–∂–Ω–æ–π —Ü–µ–ª–∏ –Ω–∞ 30 –¥–Ω–µ–π",
                    modal_about_visual: "–í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å",
                    modal_about_visual_desc: "–ö—Ä–∞—Å–∏–≤—ã–π —Ç—Ä–µ–∫–µ—Ä –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",
                    modal_about_science: "–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –Ω–∞—É–∫–µ",
                    modal_about_science_desc: "21-30 –¥–Ω–µ–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –ø—Ä–∏–≤—ã—á–∫–∏",
                    modal_about_privacy: "–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å",
                    modal_about_privacy_desc: "–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ",
                    modal_privacy_title: "–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
                    modal_privacy_storage_title: "üìÅ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ",
                    modal_privacy_storage_desc: "–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ù–∏–∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã.",
                    modal_privacy_confidential_title: "üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å",
                    modal_privacy_confidential_desc: "–ú—ã –Ω–µ —Å–æ–±–∏—Ä–∞–µ–º –∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.",
                    modal_privacy_pdf_title: "üìÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF",
                    modal_privacy_pdf_desc: "PDF —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.",
                    modal_contact_title: "–°–≤—è–∑–∞—Ç—å—Å—è",
                    modal_contact_question: "–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã?",
                    modal_contact_description: "–°–≤—è–∂–∏—Ç–µ—Å—å —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º",
                    modal_contact_developer: "–ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞",
                    developer_name: "–ò—Å–º–∞–∏–ª",
                    developer_role: "Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",
                    modal_support_title: "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
                    modal_support_subtitle: "–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",
                    modal_support_description: "–í–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —É–ª—É—á—à–∞—Ç—å —Ç—Ä–µ–∫–µ—Ä –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏",
                    modal_support_methods: "–°–ø–æ—Å–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
                    support_bank_card: "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞",
                    support_ton_wallet: "TON –∫–æ—à–µ–ª–µ–∫",
                    support_note: "–õ—é–±–∞—è —Å—É–º–º–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏—é –ø—Ä–æ–µ–∫—Ç–∞",
                    modal_delete_title: "–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫–µ—Ä",
                    modal_delete_confirm: "–í—ã —É–≤–µ—Ä–µ–Ω—ã?",
                    modal_delete_description: "–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–µ—Ä–∞ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.",
                    modal_share_title: "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç—Ä–µ–∫–µ—Ä–æ–º",
                    modal_share_subtitle: "–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç—Ä–µ–∫–µ—Ä",
                    modal_share_description: "–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–º—É —Ç—Ä–µ–∫–µ—Ä—É:",
                    modal_share_copy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
                    modal_share_open: "–û—Ç–∫—Ä—ã—Ç—å",
                    notification_tracker_created: "–¢—Ä–µ–∫–µ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!",
                    notification_progress_updated: "–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω!",
                    notification_changes_saved: "–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!",
                    notification_tracker_deleted: "–¢—Ä–µ–∫–µ—Ä —É–¥–∞–ª–µ–Ω",
                    notification_link_copied: "–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!",
                    notification_pdf_downloaded: "PDF —É—Å–ø–µ—à–Ω–æ —Å–∫–∞—á–∞–Ω!",
                    notification_card_copied: "–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω",
                    notification_ton_copied: "TON –∞–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω",
                    notification_dark_theme: "–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∞",
                    notification_light_theme: "–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∞",
                    error_fill_fields: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ",
                    error_create_first: "–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–µ–∫–µ—Ä",
                    error_tracker_not_found: "–¢—Ä–µ–∫–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω",
                    error_pdf_generation: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å PDF. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–µ–≤—å—é.",
                    error_deleting_tracker: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–µ—Ä–∞",
                    error_name_min: "–ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞",
                    error_category_required: "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é",
                    error_goal_min: "–ú–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤",
                    day: "–î–µ–Ω—å",
                    progress: "–ü—Ä–æ–≥—Ä–µ—Å—Å",
                    goal_title: "–ú–æ—è —Ü–µ–ª—å –Ω–∞ 30 –¥–Ω–µ–π:",
                    mark_each_day: "–û—Ç–º–µ—á–∞–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–∏–ª —Å–≤–æ—é —Ü–µ–ª—å!",
                    created: "–°–æ–∑–¥–∞–Ω",
                    updated: "–û–±–Ω–æ–≤–ª–µ–Ω",
                    share: "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è",
                    delete: "–£–¥–∞–ª–∏—Ç—å",
                    of: "–∏–∑",
                    days: "–¥–Ω–µ–π",
                    theme: "–¢–µ–º–∞"
                },
                en: {
                    app_name: "30-Day Tracker",
                    language: "Language",
                    nav_create_tracker: "Create Tracker",
                    nav_my_trackers: "My Trackers",
                    nav_preview: "Preview",
                    hero_title: "Create Your 30-Day Challenge",
                    hero_subtitle: "Create trackers, save progress, and achieve goals",
                    quick_action_create: "Create New Tracker",
                    my_trackers_title: "My Trackers",
                    empty_state_title: "You don't have any trackers yet",
                    empty_state_description: "Create your first tracker and start tracking progress",
                    empty_state_action: "Create First Tracker",
                    statistics_title: "Statistics",
                    stat_total_trackers: "Total Trackers",
                    stat_active_trackers: "Active Trackers",
                    stat_average_progress: "Average Progress",
                    stat_completed_days: "Completed Days",
                    form_title: "Create New Tracker",
                    form_name_label: "Your Challenge Name",
                    form_category_label: "Category",
                    form_category_placeholder: "Choose a category",
                    form_goal_label: "My 30-Day Goal",
                    form_color_label: "Tracker Color",
                    form_submit: "Create My Tracker!",
                    form_loading: "Creating...",
                    category_health: "Health & Sports",
                    category_learning: "Learning & Growth",
                    category_productivity: "Productivity",
                    category_mindfulness: "Mindfulness & Psychology",
                    category_other: "Other",
                    preview_title: "Tracker Preview",
                    preview_empty: "Your tracker will appear here after creation",
                    preview_download_pdf: "Download PDF",
                    preview_copy_link: "Copy Link",
                    preview_save_changes: "Save Changes",
                    footer_title: "30-Day Challenge Tracker",
                    footer_description: "Tool for building useful habits and achieving goals",
                    footer_about: "About Project",
                    footer_privacy: "Privacy Policy",
                    footer_contact: "Contact",
                    footer_support: "Support Project",
                    footer_copyright: "¬© 2025 30-Day Challenge Tracker. All rights reserved.",
                    footer_disclaimer: "Tool for personal use. All data is stored locally.",
                    modal_ok: "Got it",
                    modal_accept: "Accept Terms",
                    modal_close: "Close",
                    modal_cancel: "Cancel",
                    modal_delete: "Delete",
                    modal_about_title: "About Project",
                    modal_about_app_name: "30-Day Challenge Tracker",
                    modal_about_description: "Simple and effective tool for building useful habits",
                    modal_about_focus: "Focus on Goal",
                    modal_about_focus_desc: "Helps focus on one important goal for 30 days",
                    modal_about_visual: "Visual Progress",
                    modal_about_visual_desc: "Beautiful tracker motivates to continue every day",
                    modal_about_science: "Based on Science",
                    modal_about_science_desc: "21-30 days is enough to form a new habit",
                    modal_about_privacy: "Privacy",
                    modal_about_privacy_desc: "All data is stored locally in your browser",
                    modal_privacy_title: "Privacy Policy",
                    modal_privacy_storage_title: "üìÅ Local Storage",
                    modal_privacy_storage_desc: "All data is stored in your browser. No information is sent to servers.",
                    modal_privacy_confidential_title: "üîí Confidentiality",
                    modal_privacy_confidential_desc: "We do not collect or process your personal data.",
                    modal_privacy_pdf_title: "üìÑ PDF Generation",
                    modal_privacy_pdf_desc: "PDF files are created locally and immediately saved to your device.",
                    modal_contact_title: "Contact",
                    modal_contact_question: "Have questions?",
                    modal_contact_description: "Contact us in a convenient way",
                    modal_contact_developer: "Developer Contacts",
                    developer_name: "Ismail",
                    developer_role: "Frontend Developer",
                    modal_support_title: "Support Project",
                    modal_support_subtitle: "Support Project Development",
                    modal_support_description: "Your support helps improve the tracker and add new features",
                    modal_support_methods: "Support Methods",
                    support_bank_card: "Bank Card",
                    support_ton_wallet: "TON Wallet",
                    support_note: "Any amount helps project development",
                    modal_delete_title: "Delete Tracker",
                    modal_delete_confirm: "Are you sure?",
                    modal_delete_description: "This action cannot be undone. All tracker data will be deleted.",
                    modal_share_title: "Share Tracker",
                    modal_share_subtitle: "Tracker Link",
                    modal_share_description: "Save this link to always have access to your tracker:",
                    modal_share_copy: "Copy",
                    modal_share_open: "Open",
                    notification_tracker_created: "Tracker created successfully!",
                    notification_progress_updated: "Progress updated!",
                    notification_changes_saved: "Changes saved!",
                    notification_tracker_deleted: "Tracker deleted",
                    notification_link_copied: "Link copied to clipboard!",
                    notification_pdf_downloaded: "PDF downloaded successfully!",
                    notification_card_copied: "Card number copied",
                    notification_ton_copied: "TON address copied",
                    notification_dark_theme: "Dark theme enabled",
                    notification_light_theme: "Light theme enabled",
                    error_fill_fields: "Please fill in all fields correctly",
                    error_create_first: "Create a tracker first",
                    error_tracker_not_found: "Tracker not found",
                    error_pdf_generation: "Failed to create PDF. Try taking a screenshot of the preview.",
                    error_deleting_tracker: "Error deleting tracker",
                    error_name_min: "Minimum 3 characters",
                    error_category_required: "Select a category",
                    error_goal_min: "Minimum 10 characters",
                    day: "Day",
                    progress: "Progress",
                    goal_title: "My 30-Day Goal:",
                    mark_each_day: "Mark each day when you complete your goal!",
                    created: "Created",
                    updated: "Updated",
                    share: "Share",
                    delete: "Delete",
                    of: "of",
                    days: "days",
                    theme: "Theme"
                }
            },

            init() {
                const savedLang = localStorage.getItem('tracker_language');
                const browserLang = navigator.language.startsWith('en') ? 'en' : 'ru';
                this.currentLang = savedLang || browserLang;
                
                this.setLanguage(this.currentLang);
                this.initLanguageSwitcher();
            },

            setLanguage(lang) {
                if (!this.translations[lang]) return;
                
                this.currentLang = lang;
                localStorage.setItem('tracker_language', lang);
                
                document.documentElement.lang = lang;
                document.querySelector('body').setAttribute('data-lang', lang);
                
                this.translateStaticContent();
                this.updateLanguageSwitcher(lang);
                this.updatePlaceholders();
                this.updateTitles();
                this.updateValidationErrors();
                
                if (typeof ThemeManager !== 'undefined') {
                    ThemeManager.updateThemeText();
                }
                
                if (typeof App !== 'undefined') {
                    App.updateDynamicContent();
                }
            },

            translateStaticContent() {
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (this.translations[this.currentLang][key]) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            const placeholderKey = element.getAttribute('data-placeholder-' + this.currentLang);
                            if (placeholderKey) element.placeholder = placeholderKey;
                        } else {
                            element.textContent = this.translations[this.currentLang][key];
                        }
                    }
                });
                
                document.querySelectorAll('[data-title-ru], [data-title-en]').forEach(element => {
                    const titleKey = 'data-title-' + this.currentLang;
                    if (element.hasAttribute(titleKey)) {
                        element.title = element.getAttribute(titleKey);
                    }
                });
            },

            updatePlaceholders() {
                const nameInput = document.getElementById('challenge-name');
                const goalInput = document.getElementById('goal');
                
                if (nameInput) {
                    const placeholderKey = 'data-placeholder-' + this.currentLang;
                    nameInput.placeholder = nameInput.getAttribute(placeholderKey) || '';
                }
                
                if (goalInput) {
                    const placeholderKey = 'data-placeholder-' + this.currentLang;
                    goalInput.placeholder = goalInput.getAttribute(placeholderKey) || '';
                }
            },

            updateTitles() {
                const titleMap = {
                    ru: "30-–î–Ω–µ–≤–Ω—ã–π –ß–µ–ª–ª–µ–Ω–¥–∂ –¢—Ä–µ–∫–µ—Ä ‚Äî –°–æ–∑–¥–∞–π –∏ –û—Ç—Å–ª–µ–∂–∏–≤–∞–π –°–≤–æ–∏ –ü—Ä–∏–≤—ã—á–∫–∏",
                    en: "30-Day Challenge Tracker ‚Äî Create and Track Your Habits"
                };
                document.title = titleMap[this.currentLang] || titleMap.ru;
                
                const metaDescription = document.querySelector('meta[name="description"]');
                if (metaDescription) {
                    const descriptionMap = {
                        ru: "–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ 30-–¥–Ω–µ–≤–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø–æ–ª—É—á–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ü–µ–ª–µ–π.",
                        en: "Create and track your 30-day challenges. Save progress, get statistics, and achieve goals."
                    };
                    metaDescription.content = descriptionMap[this.currentLang] || descriptionMap.ru;
                }
            },

            updateValidationErrors() {
                const fieldValidations = {
                    'challenge-name': (value) => value && value.length >= 3 ? null : this.t('error_name_min'),
                    'category': (value) => value ? null : this.t('error_category_required'),
                    'goal': (value) => value && value.length >= 10 ? null : this.t('error_goal_min')
                };
                
                Object.keys(fieldValidations).forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    const errorEl = document.getElementById(`${fieldId}-error`);
                    
                    if (field && errorEl && !errorEl.classList.contains('hidden')) {
                        const error = fieldValidations[fieldId](field.value.trim());
                        if (error) {
                            errorEl.textContent = error;
                        } else {
                            errorEl.classList.add('hidden');
                            field.classList.remove('border-red-500');
                        }
                    }
                });
            },

            initLanguageSwitcher() {
                const toggle = document.getElementById('language-toggle');
                const dropdown = document.getElementById('language-dropdown');
                
                if (toggle && dropdown) {
                    toggle.addEventListener('click', (e) => {
                        e.stopPropagation();
                        dropdown.classList.toggle('active');
                        toggle.classList.toggle('active');
                    });
                    
                    document.addEventListener('click', (e) => {
                        if (!dropdown.contains(e.target) && !toggle.contains(e.target)) {
                            dropdown.classList.remove('active');
                            toggle.classList.remove('active');
                        }
                    });
                    
                    dropdown.querySelectorAll('.language-option').forEach(option => {
                        option.addEventListener('click', () => {
                            dropdown.classList.remove('active');
                            toggle.classList.remove('active');
                        });
                    });
                }
                
                this.updateLanguageSwitcher(this.currentLang);
            },

            updateLanguageSwitcher(lang) {
                document.querySelectorAll('.language-option').forEach(option => {
                    option.classList.toggle('active', option.getAttribute('data-lang') === lang);
                });
                
                const toggle = document.getElementById('language-toggle');
                if (toggle) {
                    const langText = toggle.querySelector('#current-lang-text');
                    if (langText) langText.textContent = lang === 'ru' ? 'RU' : 'US';
                }
                
                document.querySelectorAll('[data-lang]').forEach(btn => {
                    const isActive = btn.getAttribute('data-lang') === lang;
                    btn.classList.toggle('active', isActive);
                    btn.classList.toggle('bg-blue-50', isActive);
                    btn.classList.toggle('text-blue-600', isActive);
                    btn.classList.toggle('text-gray-600', !isActive);
                });
            },

            t(key, defaultText = '') {
                return this.translations[this.currentLang][key] || defaultText || key;
            },

            formatDate(date) {
                const locales = { ru: 'ru-RU', en: 'en-US' };
                const options = { day: 'numeric', month: 'long', year: 'numeric' };
                return new Date(date).toLocaleDateString(locales[this.currentLang] || 'ru-RU', options);
            }
        };

        const Utils = {
            sanitizeHtml(str) {
                if (typeof str !== 'string') return '';
                const div = document.createElement('div');
                div.textContent = str;
                return div.innerHTML;
            },
            
            sanitizeText(str, maxLength = 1000) {
                if (typeof str !== 'string') return '';
                return str.trim().slice(0, maxLength).replace(/[<>]/g, '');
            },
            
            generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            },
            
            formatDate(date) {
                return I18n.formatDate(date);
            },
            
            showNotification(messageKey, type = 'success') {
                const notification = document.getElementById('simple-notification');
                const notificationText = document.getElementById('notification-text');
                
                if (!notification || !notificationText) return;
                
                const translatedMessage = I18n.t(messageKey, messageKey);
                notificationText.textContent = translatedMessage;
                
                if (type === 'error') {
                    notification.style.backgroundColor = '#ef4444';
                } else if (type === 'warning') {
                    notification.style.backgroundColor = '#f59e0b';
                } else {
                    notification.style.backgroundColor = '#1f2937';
                }
                
                notification.classList.remove('hidden');
                notification.style.opacity = '1';
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        notification.classList.add('hidden');
                        notification.style.opacity = '0';
                    }, 300);
                }, 3000);
            },
            
            copyToClipboard(text) {
                if (navigator.clipboard) {
                    return navigator.clipboard.writeText(text)
                        .then(() => true)
                        .catch(() => this.copyFallback(text));
                }
                return this.copyFallback(text);
            },
            
            copyFallback(text) {
                try {
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    return true;
                } catch {
                    return false;
                }
            },
            
            getTrackerUrl(trackerId) {
                return `${window.location.origin}${window.location.pathname}#tracker-${trackerId}`;
            }
        };

        const TrackerStorage = {
            getTrackers() {
                try {
                    const data = localStorage.getItem(CONFIG.storageKey);
                    return data ? JSON.parse(data) : [];
                } catch {
                    return [];
                }
            },
            
            saveTrackers(trackers) {
                try {
                    if (trackers.length > CONFIG.maxTrackers) {
                        trackers = trackers.slice(0, CONFIG.maxTrackers);
                        Utils.showNotification(
                            I18n.t('notification_tracker_limit', `–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Ç—Ä–µ–∫–µ—Ä–æ–≤ (${CONFIG.maxTrackers})`), 
                            'warning'
                        );
                    }
                    
                    localStorage.setItem(CONFIG.storageKey, JSON.stringify(trackers));
                    return true;
                } catch {
                    Utils.showNotification(I18n.t('error_saving_data', '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö'), 'error');
                    return false;
                }
            },
            
            saveTracker(tracker) {
                const trackers = this.getTrackers();
                const existingIndex = trackers.findIndex(t => t.id === tracker.id);
                
                if (existingIndex >= 0) {
                    trackers[existingIndex] = tracker;
                } else {
                    tracker.createdAt = tracker.createdAt || new Date().toISOString();
                    tracker.updatedAt = new Date().toISOString();
                    trackers.unshift(tracker);
                }
                
                return this.saveTrackers(trackers);
            },
            
            deleteTracker(trackerId) {
                const trackers = this.getTrackers();
                const filteredTrackers = trackers.filter(t => t.id !== trackerId);
                return this.saveTrackers(filteredTrackers);
            },
            
            getTracker(trackerId) {
                const trackers = this.getTrackers();
                return trackers.find(t => t.id === trackerId) || null;
            },
            
            updateTrackerDays(trackerId, checkedDays) {
                const tracker = this.getTracker(trackerId);
                if (!tracker) return false;
                
                tracker.checkedDays = checkedDays;
                tracker.updatedAt = new Date().toISOString();
                tracker.progress = Math.round((checkedDays.length / 30) * 100);
                
                return this.saveTracker(tracker);
            }
        };

        const TrackerGenerator = {
            generateTrackerHTML(data, forPDF = false) {
                const color = CONFIG.colorMap[data.color] || CONFIG.colorMap.blue;
                const colorName = I18n.currentLang === 'en' ? color.name_en : color.name;
                const checkedDays = data.checkedDays || [];
                const progress = data.progress || 0;

                if (forPDF) {
                    return this.generatePDFHTML(data, color, checkedDays, progress);
                }
                
                return this.generateSiteHTML(data, color, checkedDays, progress);
            },

            generatePDFHTML(data, color, checkedDays, progress) {
                let daysGrid = '';
                for (let day = 1; day <= 30; day++) {
                    const isChecked = checkedDays.includes(day);
                    const cellBorderColor = isChecked ? color.hex : '#e5e7eb';
                    const checkBoxBorderColor = isChecked ? color.hex : '#d1d5db';
                    const checkBoxBgColor = isChecked ? color.hex : 'transparent';
                    
                    daysGrid += `
                        <div class="pdf-day-cell" style="border-color: ${cellBorderColor} !important;">
                            <div style="font-size: 11px !important; font-weight: 600 !important; color: #6b7280 !important; margin-bottom: 4px !important;">
                                ${I18n.t('day')} ${day}
                            </div>
                            <div class="pdf-check-box" style="border-color: ${checkBoxBorderColor} !important; background-color: ${checkBoxBgColor} !important;">
                                ${isChecked ? 
                                    '<svg style="width: 16px !important; height: 16px !important; color: white !important;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>' 
                                    : ''}
                            </div>
                        </div>
                    `;
                }

                return `
                    <div class="pdf-template">
                        <div style="border-bottom: 3px solid ${color.hex} !important; padding-bottom: 16px !important; margin-bottom: 24px !important; text-align: center !important;">
                            <h1 style="font-size: 24px !important; font-weight: 700 !important; margin-bottom: 8px !important; color: ${color.hex} !important; word-break: break-word !important;">
                                ${Utils.sanitizeHtml(data.name)}
                            </h1>
                            <p style="color: #4b5563 !important; font-size: 16px !important; word-wrap: break-word !important;">
                                ${this.getCategoryName(data.category)}
                            </p>
                            <p style="color: #6b7280 !important; font-size: 14px !important; margin-top: 4px !important;">
                                ${I18n.t('progress')}: ${progress}%
                            </p>
                        </div>
                        
                        <div style="background-color: ${color.hex}15 !important; padding: 16px !important; border-radius: 0.5rem !important; margin-bottom: 24px !important;">
                            <h2 style="font-size: 18px !important; font-weight: 600 !important; margin-bottom: 8px !important; color: ${color.hex} !important;">
                                ${I18n.t('goal_title')}
                            </h2>
                            <p style="color: #374151 !important; line-height: 1.5 !important; font-size: 14px !important; word-wrap: break-word !important; width: 100% !important; box-sizing: border-box !important; text-align: left !important; margin: 0 !important; padding: 0 !important;">
                                ${Utils.sanitizeHtml(data.goal)}
                            </p>
                        </div>
                        
                        <div class="pdf-calendar-grid">
                            ${daysGrid}
                        </div>
                        
                        <div style="text-align: center !important; color: #6b7280 !important; font-size: 12px !important; margin-top: 24px !important; padding-top: 16px !important; border-top: 1px solid #e5e7eb !important;">
                            <p style="margin-bottom: 4px !important;">
                                ${I18n.t('mark_each_day')}
                            </p>
                            <p>
                                ${I18n.t('created')}: ${Utils.formatDate(data.createdAt)} ‚Ä¢ ${I18n.t('updated')}: ${Utils.formatDate(data.updatedAt)}
                            </p>
                        </div>
                    </div>
                `;
            },

            generateSiteHTML(data, color, checkedDays, progress) {
                let daysGrid = '';
                for (let day = 1; day <= 30; day++) {
                    const isChecked = checkedDays.includes(day);
                    const cellBorderColor = isChecked ? color.hex : '#e5e7eb';
                    const checkBoxBorderColor = isChecked ? color.hex : '#d1d5db';
                    const checkBoxBgColor = isChecked ? color.hex : 'transparent';
                    const iconDisplay = isChecked ? 'block' : 'none';
                    
                    daysGrid += `
                        <div class="day-cell border-2 cursor-pointer hover:shadow-md transition-shadow bg-white dark:bg-gray-700" 
                            data-day="${day}" 
                            data-tracker-id="${data.id}"
                            style="min-height: 5rem; border-radius: 0.5rem; padding: 0.5rem; text-align: center; border-color: ${cellBorderColor};">
                            <div class="text-xs font-semibold text-gray-500 mb-2 dark:text-gray-400">
                                ${I18n.t('day')} ${day}
                            </div>
                            <div class="check-box w-10 h-10 mx-auto border-2 rounded-lg flex items-center justify-center" 
                                style="border-color: ${checkBoxBorderColor}; background-color: ${checkBoxBgColor}; border-radius: 0.5rem;">
                                <i class="fas fa-check text-white text-sm" style="display: ${iconDisplay};"></i>
                            </div>
                        </div>
                    `;
                }

                return `
                    <div class="tracker-container p-4 sm:p-6 md:p-8 dark:bg-gray-800" id="tracker-${data.id}" style="max-width: 100%; margin: 0 auto; font-family: -apple-system, sans-serif;">
                        <div class="header mb-4 sm:mb-6 text-center" style="border-bottom: 3px solid ${color.hex}; padding-bottom: 0.75rem sm:1rem;">
                            <div class="flex justify-between items-center mb-2">
                                <h1 class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-left flex-1 break-all overflow-hidden" 
                                    style="color: ${color.hex}; word-break: break-word !important;">
                                    ${Utils.sanitizeHtml(data.name)}
                                </h1>
                                <div class="flex gap-2">
                                    <button onclick="App.shareTracker('${data.id}')" class="text-gray-500 hover:text-green-600 p-2 dark:text-gray-400 dark:hover:text-green-400" title="${I18n.t('share')}">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                    <button onclick="App.deleteTrackerPrompt('${data.id}')" class="text-gray-500 hover:text-red-600 p-2 dark:text-gray-400 dark:hover:text-red-400" title="${I18n.t('delete')}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <p class="text-gray-600 text-sm sm:text-base dark:text-gray-400">${this.getCategoryName(data.category)}</p>
                                <p class="text-gray-500 text-sm dark:text-gray-400">
                                    ${I18n.t('progress')}: <span class="font-bold">${progress}%</span>
                                </p>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <div class="progress-bar bg-gray-200 dark:bg-gray-700">
                                <div class="progress-fill" style="width: ${progress}%; background-color: ${color.hex};"></div>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500 mt-1 dark:text-gray-400">
                                <span>${checkedDays.length} ${I18n.t('of')} 30 ${I18n.t('days')}</span>
                                <span>${progress}%</span>
                            </div>
                        </div>
                        
                        <div class="goal-section mb-4 sm:mb-6 p-3 sm:p-4 md:p-6 rounded-lg" style="background-color: ${color.hex}15;">
                            <h2 class="text-base sm:text-lg md:text-xl font-semibold mb-2 sm:mb-3" style="color: ${color.hex};">
                                ${I18n.t('goal_title')}
                            </h2>
                            <p class="text-gray-700 text-sm sm:text-base whitespace-pre-wrap dark:text-gray-300" style="text-align: left !important; word-wrap: break-word !important; margin: 0 !important; padding: 0 !important;">${Utils.sanitizeHtml(data.goal)}</p>
                        </div>
                        
                        <div class="calendar-grid">
                            ${daysGrid}
                        </div>
                        
                        <div class="footer mt-4 sm:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 text-center text-gray-500 text-xs sm:text-sm dark:text-gray-400">
                            <p class="mb-2">${I18n.t('mark_each_day')}</p>
                            <div class="flex justify-between">
                                <p>${I18n.t('created')}: ${Utils.formatDate(data.createdAt)}</p>
                                <p>${I18n.t('updated')}: ${Utils.formatDate(data.updatedAt)}</p>
                            </div>
                        </div>
                    </div>
                `;
            },

            getCategoryName(category) {
                const categoryNames = {
                    health: I18n.t('category_health'),
                    learning: I18n.t('category_learning'),
                    productivity: I18n.t('category_productivity'),
                    mindfulness: I18n.t('category_mindfulness'),
                    other: I18n.t('category_other')
                };
                return categoryNames[category] || I18n.t('category_other');
            },

            generateTrackerListItem(tracker) {
                const color = CONFIG.colorMap[tracker.color] || CONFIG.colorMap.blue;
                const checkedDays = tracker.checkedDays || [];
                const progress = tracker.progress || 0;
                const daysCompleted = checkedDays.length;
                
                return `
                    <div class="tracker-list-item bg-white rounded-xl shadow-md p-4 md:p-6 cursor-pointer hover:shadow-lg dark:bg-gray-800 dark:hover:shadow-gray-900" 
                         onclick="App.openTracker('${tracker.id}')"
                         data-tracker-id="${tracker.id}">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background-color: ${color.hex}20;">
                                    <i class="fas fa-chart-line" style="color: ${color.hex};"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-900 text-sm md:text-base truncate max-w-[200px] dark:text-white">${Utils.sanitizeHtml(tracker.name)}</h3>
                                    <p class="text-gray-500 text-xs dark:text-gray-400">${this.getCategoryName(tracker.category)}</p>
                                </div>
                            </div>
                            <button onclick="event.stopPropagation(); App.deleteTrackerPrompt('${tracker.id}')" 
                                    class="text-gray-400 hover:text-red-600 p-1 dark:text-gray-500 dark:hover:text-red-400" title="${I18n.t('delete')}">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                        
                        <div class="mb-3">
                            <div class="progress-bar bg-gray-200 dark:bg-gray-700">
                                <div class="progress-fill" style="width: ${progress}%; background-color: ${color.hex};"></div>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500 mt-1 dark:text-gray-400">
                                <span>${daysCompleted} ${I18n.t('of')} 30 ${I18n.t('days')}</span>
                                <span>${progress}%</span>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                            <div class="flex items-center">
                                <i class="far fa-calendar mr-1"></i>
                                <span>${Utils.formatDate(tracker.createdAt)}</span>
                            </div>
                            <button onclick="event.stopPropagation(); App.shareTracker('${tracker.id}')" 
                                    class="text-blue-600 hover:text-blue-700 flex items-center dark:text-blue-400 dark:hover:text-blue-300">
                                <i class="fas fa-share-alt mr-1"></i>
                                <span>${I18n.t('share')}</span>
                            </button>
                        </div>
                    </div>
                `;
            },

            renderPreview(trackerData) {
                const preview = document.getElementById('pdf-preview');
                if (!preview) return;
                
                preview.innerHTML = this.generateTrackerHTML(trackerData, false);
                preview.classList.add('fade-in');
                
                preview.dataset.trackerData = JSON.stringify(trackerData);
                preview.dataset.trackerId = trackerData.id;
                
                document.getElementById('preview-actions').classList.remove('hidden');
                this.attachDayClickHandlers(trackerData.id, trackerData.color);
            },

            attachDayClickHandlers(trackerId, colorName) {
                const color = CONFIG.colorMap[colorName] || CONFIG.colorMap.blue;
                const preview = document.getElementById('pdf-preview');
                
                if (!preview) return;
                
                preview.querySelectorAll('.day-cell[data-tracker-id="' + trackerId + '"]').forEach(cell => {
                    cell.addEventListener('click', function() {
                        const day = parseInt(this.getAttribute('data-day'));
                        const checkBox = this.querySelector('.check-box');
                        const icon = checkBox.querySelector('.fa-check');
                        
                        const trackerDataStr = preview.dataset.trackerData;
                        if (!trackerDataStr) return;
                        
                        const trackerData = JSON.parse(trackerDataStr);
                        const checkedDays = trackerData.checkedDays || [];
                        
                        if (checkedDays.includes(day)) {
                            const index = checkedDays.indexOf(day);
                            checkedDays.splice(index, 1);
                            checkBox.style.backgroundColor = 'transparent';
                            checkBox.style.borderColor = '#d1d5db';
                            if (icon) icon.style.display = 'none';
                            this.style.borderColor = '#e5e7eb';
                        } else {
                            checkedDays.push(day);
                            checkedDays.sort((a, b) => a - b);
                            checkBox.style.backgroundColor = color.hex;
                            checkBox.style.borderColor = color.hex;
                            if (icon) icon.style.display = 'block';
                            this.style.borderColor = color.hex;
                        }
                        
                        trackerData.checkedDays = checkedDays;
                        trackerData.progress = Math.round((checkedDays.length / 30) * 100);
                        preview.dataset.trackerData = JSON.stringify(trackerData);
                        
                        const progressFill = preview.querySelector('.progress-fill');
                        const progressText = preview.querySelectorAll('.text-xs.text-gray-500 span');
                        
                        if (progressFill) progressFill.style.width = trackerData.progress + '%';
                        if (progressText.length >= 2) {
                            progressText[0].textContent = `${checkedDays.length} ${I18n.t('of')} 30 ${I18n.t('days')}`;
                            progressText[1].textContent = `${trackerData.progress}%`;
                        }

                        const headerProgress = preview.querySelector('.header .text-gray-500 .font-bold');
                        if (headerProgress) {
                            headerProgress.textContent = `${trackerData.progress}%`;
                        }

                        const updatedDateElement = preview.querySelector('.footer .flex.justify-between p:nth-child(2)');
                        if (updatedDateElement) {
                            updatedDateElement.textContent = `${I18n.t('updated')}: ${Utils.formatDate(new Date().toISOString())}`;
                        }
                        
                        TrackerStorage.updateTrackerDays(trackerId, checkedDays);
                        App.loadTrackers();
                        App.updateStatistics();
                        Utils.showNotification(I18n.t('notification_progress_updated'));
                    });
                });
            },

            async generatePDF(trackerData) {
                try {
                    const tempContainer = document.createElement('div');
                    tempContainer.style.cssText = `
                        position: absolute !important;
                        left: -9999px !important;
                        top: 0 !important;
                        width: 794px !important;
                        height: 1123px !important;
                        background: white !important;
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
                        box-sizing: border-box !important;
                        overflow: hidden !important;
                    `;
                    
                    tempContainer.innerHTML = this.generateTrackerHTML(trackerData, true);
                    document.body.appendChild(tempContainer);
                    
                    const canvas = await html2canvas(tempContainer, {
                        scale: 2,
                        useCORS: true,
                        backgroundColor: '#ffffff',
                        logging: false,
                        allowTaint: true,
                        width: 794,
                        height: 1123,
                        onclone: function(clonedDoc) {
                            clonedDoc.body.style.background = '#ffffff';
                            clonedDoc.body.style.backgroundColor = '#ffffff';
                        }
                    });
                    
                    document.body.removeChild(tempContainer);
                    
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    doc.setFillColor(255, 255, 255);
                    doc.rect(0, 0, 210, 297, 'F');
                    
                    const imgData = canvas.toDataURL('image/jpeg', 1.0);
                    const imgWidth = 190;
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;
                    const xPos = (210 - imgWidth) / 2;
                    const yPos = 10;
                    
                    doc.addImage(imgData, 'JPEG', xPos, yPos, imgWidth, imgHeight);
                    
                    const safeFileName = trackerData.name
                        .replace(/[^\w\s–∞-—è–ê-–Ø—ë–Å-]/gi, '')
                        .replace(/\s+/g, '_')
                        .substring(0, 50);
                    
                    const fileName = I18n.currentLang === 'en' 
                        ? `Tracker_${safeFileName || 'challenge'}.pdf`
                        : `–¢—Ä–µ–∫–µ—Ä_${safeFileName || '—á–µ–ª–ª–µ–Ω–¥–∂'}.pdf`;
                    
                    doc.save(fileName);
                    
                    Utils.showNotification(I18n.t('notification_pdf_downloaded'));
                    return true;
                } catch {
                    Utils.showNotification(I18n.t('error_pdf_generation'), 'error');
                    return false;
                }
            }
        };

        const App = {
            currentTrackerId: null,
            trackerToDelete: null,
            
            init() {
                I18n.init();
                ThemeManager.init();
                this.initMobileMenu();
                this.initForm();
                this.initColorPicker();
                this.initEventListeners();
                this.loadTrackers();
                this.checkUrlHash();
                this.initModals();
            },
            
            initMobileMenu() {
                const menuBtn = document.getElementById('mobile-menu-btn');
                const mobileMenu = document.getElementById('mobile-menu');
                
                if (menuBtn && mobileMenu) {
                    menuBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        mobileMenu.classList.toggle('hidden');
                        menuBtn.classList.toggle('bg-gray-100');
                    });
                    
                    document.addEventListener('click', (e) => {
                        if (!mobileMenu.contains(e.target) && !menuBtn.contains(e.target)) {
                            mobileMenu.classList.add('hidden');
                            menuBtn.classList.remove('bg-gray-100');
                        }
                    });
                    
                    mobileMenu.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            mobileMenu.classList.add('hidden');
                            menuBtn.classList.remove('bg-gray-100');
                        });
                    });
                }
            },
            
            initForm() {
                const form = document.getElementById('tracker-form');
                if (!form) return;
                
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleFormSubmit();
                });
                
                form.querySelectorAll('input, select, textarea').forEach(input => {
                    input.addEventListener('blur', () => this.validateField(input));
                    input.addEventListener('input', () => {
                        const errorEl = document.getElementById(`${input.id}-error`);
                        if (errorEl) errorEl.classList.add('hidden');
                        input.classList.remove('border-red-500');
                    });
                });
            },
            
            initColorPicker() {
                document.querySelectorAll('input[name="color"]').forEach(input => {
                    const label = document.querySelector(`label[for="${input.id}"]`);
                    
                    if (input.checked) {
                        this.updateColorSelection(input);
                    }
                    
                    input.addEventListener('change', (e) => {
                        this.updateColorSelection(e.target);
                    });
                });
            },
            
            updateColorSelection(selectedInput) {
                document.querySelectorAll('input[name="color"]').forEach(input => {
                    const label = document.querySelector(`label[for="${input.id}"]`);
                    if (input === selectedInput) {
                        label.classList.remove('border-transparent');
                        label.classList.add('border-gray-900', 'dark:border-white', 'ring-2', 'ring-gray-400', 'ring-offset-2');
                        label.style.transform = 'scale(1.1)';
                    } else {
                        label.classList.remove('border-gray-900', 'dark:border-white', 'ring-2', 'ring-gray-400', 'ring-offset-2');
                        label.classList.add('border-transparent');
                        label.style.transform = 'scale(1)';
                    }
                });
            },
            
            initEventListeners() {
                const downloadBtn = document.getElementById('download-pdf-btn');
                if (downloadBtn) {
                    downloadBtn.addEventListener('click', async () => {
                        const preview = document.getElementById('pdf-preview');
                        const trackerDataStr = preview?.dataset.trackerData;
                        
                        if (!trackerDataStr) {
                            Utils.showNotification(I18n.t('error_create_first'), 'error');
                            return;
                        }
                        
                        try {
                            const trackerData = JSON.parse(trackerDataStr);
                            downloadBtn.disabled = true;
                            downloadBtn.innerHTML = `<i class="fas fa-spinner fa-spin mr-2"></i>${I18n.t('generating', '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...')}`;
                            
                            await TrackerGenerator.generatePDF(trackerData);
                            
                            downloadBtn.disabled = false;
                            downloadBtn.innerHTML = `<i class="fas fa-download mr-2"></i>${I18n.t('preview_download_pdf')}`;
                        } catch {
                            downloadBtn.disabled = false;
                            downloadBtn.innerHTML = `<i class="fas fa-download mr-2"></i>${I18n.t('preview_download_pdf')}`;
                        }
                    });
                }
                
                const copyLinkBtn = document.getElementById('copy-tracker-link-btn');
                if (copyLinkBtn) {
                    copyLinkBtn.addEventListener('click', () => {
                        const preview = document.getElementById('pdf-preview');
                        const trackerId = preview?.dataset.trackerId;
                        
                        if (!trackerId) {
                            Utils.showNotification(I18n.t('error_create_first'), 'error');
                            return;
                        }
                        
                        const url = Utils.getTrackerUrl(trackerId);
                        Utils.copyToClipboard(url).then(success => {
                            if (success) Utils.showNotification(I18n.t('notification_link_copied'));
                        });
                    });
                }
                
                const saveBtn = document.getElementById('save-changes-btn');
                if (saveBtn) {
                    saveBtn.addEventListener('click', () => {
                        const preview = document.getElementById('pdf-preview');
                        const trackerDataStr = preview?.dataset.trackerData;
                        
                        if (!trackerDataStr) return;
                        
                        const trackerData = JSON.parse(trackerDataStr);
                        TrackerStorage.saveTracker(trackerData);
                        Utils.showNotification(I18n.t('notification_changes_saved'));
                    });
                }
            },
            
            initModals() {
                const confirmDeleteBtn = document.getElementById('confirm-delete-btn');
                if (confirmDeleteBtn) {
                    confirmDeleteBtn.addEventListener('click', () => {
                        if (this.trackerToDelete) {
                            this.deleteTracker(this.trackerToDelete);
                            this.trackerToDelete = null;
                        }
                        closeModal('delete-tracker-modal');
                    });
                }
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        document.querySelectorAll('[id$="-modal"]').forEach(modal => {
                            if (!modal.classList.contains('hidden')) closeModal(modal.id);
                        });
                    }
                });
            },
            
            validateField(field) {
                const value = field.value.trim();
                let error = null;
                
                switch(field.name || field.id) {
                    case 'challenge-name':
                        if (!value || value.length < 3) error = I18n.t('error_name_min');
                        break;
                    case 'category':
                        if (!value) error = I18n.t('error_category_required');
                        break;
                    case 'goal':
                        if (!value || value.length < 10) error = I18n.t('error_goal_min');
                        break;
                }
                
                const errorEl = document.getElementById(`${field.id}-error`);
                if (error) {
                    field.classList.add('border-red-500');
                    if (errorEl) {
                        errorEl.textContent = error;
                        errorEl.classList.remove('hidden');
                    }
                } else {
                    field.classList.remove('border-red-500');
                    if (errorEl) errorEl.classList.add('hidden');
                }
            },
            
            handleFormSubmit() {
                const submitBtn = document.getElementById('submit-btn');
                const btnText = submitBtn.querySelector('.btn-text');
                const btnLoading = submitBtn.querySelector('.btn-loading');
                
                const formData = {
                    name: Utils.sanitizeText(document.getElementById('challenge-name').value, 100),
                    category: document.getElementById('category').value,
                    goal: Utils.sanitizeText(document.getElementById('goal').value, 500),
                    color: document.querySelector('input[name="color"]:checked')?.value || 'blue'
                };
                
                let hasError = false;
                ['challenge-name', 'category', 'goal'].forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    this.validateField(field);
                    const errorEl = document.getElementById(`${fieldId}-error`);
                    if (errorEl && !errorEl.classList.contains('hidden')) hasError = true;
                });
                
                if (hasError) {
                    Utils.showNotification(I18n.t('error_fill_fields'), 'error');
                    return;
                }
                
                submitBtn.disabled = true;
                btnText.classList.add('hidden');
                btnLoading.classList.remove('hidden');
                
                const newTracker = {
                    id: Utils.generateId(),
                    ...formData,
                    checkedDays: [],
                    progress: 0,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                const saved = TrackerStorage.saveTracker(newTracker);
                
                if (saved) {
                    TrackerGenerator.renderPreview(newTracker);
                    this.loadTrackers();
                    
                    setTimeout(() => {
                        const preview = document.getElementById('preview-heading');
                        if (preview) preview.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                    
                    Utils.showNotification(I18n.t('notification_tracker_created'));
                }
                
                submitBtn.disabled = false;
                btnText.classList.remove('hidden');
                btnLoading.classList.add('hidden');
                
                if (saved) {
                    document.getElementById('tracker-form').reset();
                    const defaultColor = document.querySelector('input[name="color"][value="blue"]');
                    if (defaultColor) {
                        defaultColor.checked = true;
                        this.updateColorSelection(defaultColor);
                    }
                }
            },
            
            loadTrackers() {
                const trackers = TrackerStorage.getTrackers();
                const container = document.getElementById('trackers-list-container');
                const emptyState = document.getElementById('empty-trackers-state');
                const statisticsContainer = document.getElementById('statistics-container');
                
                if (!container || !emptyState) return;
                
                const grid = container.querySelector('.grid');
                if (grid) grid.innerHTML = '';
                
                if (trackers.length === 0) {
                    emptyState.classList.remove('hidden');
                    if (statisticsContainer) statisticsContainer.classList.add('hidden');
                    return;
                }
                
                emptyState.classList.add('hidden');
                if (statisticsContainer) statisticsContainer.classList.remove('hidden');
                
                trackers.forEach(tracker => {
                    if (grid) grid.insertAdjacentHTML('beforeend', TrackerGenerator.generateTrackerListItem(tracker));
                });
                
                this.updateStatistics();
            },
            
            updateStatistics() {
                const trackers = TrackerStorage.getTrackers();
                
                let completedDays = 0;
                let activeTrackers = 0;
                let totalProgress = 0;
                
                trackers.forEach(tracker => {
                    const days = tracker.checkedDays || [];
                    const progress = tracker.progress || 0;
                    
                    completedDays += days.length;
                    totalProgress += progress;
                    if (days.length > 0) activeTrackers++;
                });
                
                const averageProgress = trackers.length > 0 ? Math.round(totalProgress / trackers.length) : 0;
                
                const totalTrackersEl = document.getElementById('total-trackers');
                const activeTrackersEl = document.getElementById('active-trackers');
                const completedDaysEl = document.getElementById('completed-days');
                const averageProgressEl = document.getElementById('average-progress');
                
                if (totalTrackersEl) totalTrackersEl.textContent = trackers.length;
                if (activeTrackersEl) activeTrackersEl.textContent = activeTrackers;
                if (completedDaysEl) completedDaysEl.textContent = completedDays;
                if (averageProgressEl) averageProgressEl.textContent = averageProgress + '%';
            },
            
            openTracker(trackerId) {
                const tracker = TrackerStorage.getTracker(trackerId);
                if (!tracker) {
                    Utils.showNotification(I18n.t('error_tracker_not_found'), 'error');
                    return;
                }
                
                TrackerGenerator.renderPreview(tracker);
                
                const preview = document.getElementById('preview-heading');
                if (preview) preview.scrollIntoView({ behavior: 'smooth' });
                
                this.setActiveTracker(trackerId);
            },
            
            setActiveTracker(trackerId) {
                document.querySelectorAll('.tracker-list-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                const activeItem = document.querySelector(`.tracker-list-item[data-tracker-id="${trackerId}"]`);
                if (activeItem) activeItem.classList.add('active');
            },
            
            deleteTrackerPrompt(trackerId) {
                const tracker = TrackerStorage.getTracker(trackerId);
                if (!tracker) return;
                
                this.trackerToDelete = trackerId;
                
                const messageEl = document.getElementById('delete-tracker-message');
                if (messageEl) {
                    messageEl.innerHTML = `
                        <div class="mb-2">${I18n.t('modal_delete_description')}</div>
                        <div class="font-semibold text-gray-900 break-words max-w-full overflow-hidden dark:text-white">
                            "${Utils.sanitizeHtml(tracker.name)}"
                        </div>
                    `;
                }
                
                openModal('delete-tracker-modal');
            },
            
            deleteTracker(trackerId) {
                const success = TrackerStorage.deleteTracker(trackerId);
                
                if (success) {
                    const trackerElement = document.querySelector(`.tracker-list-item[data-tracker-id="${trackerId}"]`);
                    if (trackerElement) trackerElement.remove();
                    
                    const preview = document.getElementById('pdf-preview');
                    const currentTrackerId = preview?.dataset.trackerId;
                    
                    if (currentTrackerId === trackerId) {
                        preview.innerHTML = `
                            <p class="text-gray-400 text-lg sm:text-xl text-center px-4 dark:text-gray-500">
                                <i class="fas fa-magic text-gray-300 text-2xl mb-2 block dark:text-gray-600"></i>
                                <span>${I18n.t('preview_empty')}</span>
                            </p>
                        `;
                        preview.dataset.trackerData = '';
                        preview.dataset.trackerId = '';
                        document.getElementById('preview-actions').classList.add('hidden');
                    }
                    
                    this.updateStatistics();
                    
                    const trackers = TrackerStorage.getTrackers();
                    const emptyState = document.getElementById('empty-trackers-state');
                    const statisticsContainer = document.getElementById('statistics-container');
                    
                    if (trackers.length === 0) {
                        if (emptyState) emptyState.classList.remove('hidden');
                        if (statisticsContainer) statisticsContainer.classList.add('hidden');
                    }
                    
                    Utils.showNotification(I18n.t('notification_tracker_deleted'));
                } else {
                    Utils.showNotification(I18n.t('error_deleting_tracker'), 'error');
                }
            },
            
            shareTracker(trackerId) {
                const tracker = TrackerStorage.getTracker(trackerId);
                if (!tracker) {
                    Utils.showNotification(I18n.t('error_tracker_not_found'), 'error');
                    return;
                }
                
                const url = Utils.getTrackerUrl(trackerId);
                const shareUrlEl = document.getElementById('tracker-share-url');
                const openLinkEl = document.getElementById('open-tracker-link');
                
                if (shareUrlEl) shareUrlEl.textContent = url;
                if (openLinkEl) openLinkEl.href = url;
                
                openModal('share-tracker-modal');
            },
            
            checkUrlHash() {
                const hash = window.location.hash;
                if (hash && hash.startsWith('#tracker-')) {
                    const trackerId = hash.replace('#tracker-', '');
                    const tracker = TrackerStorage.getTracker(trackerId);
                    
                    if (tracker) {
                        setTimeout(() => this.openTracker(trackerId), 500);
                    }
                }
            },
            
            updateDynamicContent() {
                this.loadTrackers();
                
                const preview = document.getElementById('pdf-preview');
                const trackerDataStr = preview?.dataset.trackerData;
                
                if (trackerDataStr) {
                    const trackerData = JSON.parse(trackerDataStr);
                    TrackerGenerator.renderPreview(trackerData);
                }
            }
        };

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        function copyCardNumber() {
            Utils.copyToClipboard("2202 2055 7513 3944").then(success => {
                if (success) Utils.showNotification(I18n.t('notification_card_copied'));
            });
        }

        function copyTonWallet() {
            Utils.copyToClipboard("UQB650sDu-0vZiBrzHvoVRmxmvTNEweRQ02qijkKKmDk3wC2").then(success => {
                if (success) Utils.showNotification(I18n.t('notification_ton_copied'));
            });
        }

        function copyShareUrl() {
            const shareUrlEl = document.getElementById('tracker-share-url');
            if (!shareUrlEl) return;
            
            Utils.copyToClipboard(shareUrlEl.textContent).then(success => {
                if (success) Utils.showNotification(I18n.t('notification_link_copied'));
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            App.init();
            
            document.querySelectorAll('[id$="-modal"]').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal(modal.id);
                });
            });
            
            window.openModal = openModal;
            window.closeModal = closeModal;
            window.copyCardNumber = copyCardNumber;
            window.copyTonWallet = copyTonWallet;
            window.copyShareUrl = copyShareUrl;
            window.I18n = I18n;
            window.App = App;
        });

        window.addEventListener('hashchange', () => {
            App.checkUrlHash();
        });
    </script>
</body>
</html>